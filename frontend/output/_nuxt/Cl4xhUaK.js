import{b4 as S,bp as C,bi as B,bz as D,bd as V,ba as E,aY as u,b5 as t,aZ as n,bl as g,bm as f,b9 as s,bB as x,be as I,bf as N,bg as q,b8 as k,b7 as p,bk as F,bt as U,bo as h,aW as M,a_ as b,bc as L}from"./B132AJ_X.js";import{_ as R}from"./CzGapVpC.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};l.SENTRY_RELEASE={id:"3703708ef9ac1b45e23fc2a6a145a79341d4c60a"}}catch{}})();try{(function(){var l=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},d=new l.Error().stack;d&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[d]="40c5dbde-8c5b-4f1d-aaf5-e8d77e41c589",l._sentryDebugIdIdentifier="sentry-dbid-40c5dbde-8c5b-4f1d-aaf5-e8d77e41c589")})()}catch{}const H={class:"p-4 sm:p-6 max-w-3xl mx-auto space-y-8"},P={class:"flex items-center gap-3"},z={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},A=["value"],Y={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},$={class:"pt-2"},O=["disabled"],Q={class:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 sm:p-6"},W={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"},Z={class:"mt-4"},j={class:"text-sm px-4 py-2 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-md hover:bg-gray-300 dark:hover:bg-gray-700"},K=S({__name:"create",setup(l){const d=C(),y=B(),m=M(),r=D({title:"",description:"",priority:"medium",screenshot:null,topic_slug:""});function w(o){var i;const e=o.target;r.screenshot=((i=e.files)==null?void 0:i[0])??null}const c=V([]);async function v(){try{const o=await h(`${m.public.apiBase}/helpdesk/topics/ticket`);c.value=(o==null?void 0:o.data)??[]}catch(o){console.error("❌ Failed to load helpdesk topics",o),c.value=[]}}E(async()=>{await v()});async function _(){try{const o=new FormData;o.append("title",r.title),o.append("description",r.description),o.append("priority",r.priority),r.topic_slug&&o.append("topic_slug",r.topic_slug),r.screenshot&&o.append("screenshot",r.screenshot);const e=await h(`${m.public.apiBase}/helpdesk/tickets`,{method:"POST",body:o,credentials:"include"});if(console.log("📩 Ticket submit response:",e),e!=null&&e.error)throw e.error;y.success({title:"Success",message:"✅ Ticket submitted successfully!",timeout:3e3}),d.push("/dashboard/helpdesk")}catch(o){console.error("❌ Ticket submit failed",o),y.error({title:"Error",message:"❌ Ticket submit failed",timeout:3e3})}}return(o,e)=>{const i=L,T=R;return b(),u("div",H,[t("div",P,[n(i,{name:"mdi-plus-box",class:"text-blue-600 dark:text-blue-400 text-2xl"}),e[4]||(e[4]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"}," Create New Support Ticket ",-1))]),t("form",{onSubmit:F(_,["prevent"]),class:"space-y-6 bg-white dark:bg-gray-900 p-4 sm:p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Title ",-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s(r).title=a),type:"text",required:"",placeholder:"Brief summary of your issue",class:"w-full border border-gray-300 dark:border-gray-700 rounded-md px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[f,s(r).title]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Description ",-1)),g(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>s(r).description=a),rows:"5",required:"",placeholder:"Please describe your issue in detail...",class:"w-full border border-gray-300 dark:border-gray-700 rounded-md px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y"},null,512),[[f,s(r).description]])]),t("div",z,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Priority ",-1)),g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>s(r).priority=a),class:"w-full border border-gray-300 dark:border-gray-700 rounded-md px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[7]||(e[7]=[t("option",{value:"low"},"Low",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"high"},"High",-1),t("option",{value:"urgent"},"Urgent",-1)]),512),[[x,s(r).priority]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Topic ",-1)),g(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>s(r).topic_slug=a),class:"w-full border border-gray-300 dark:border-gray-700 rounded-md px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[9]||(e[9]=t("option",{disabled:"",value:""},"Select a topic",-1)),(b(!0),u(I,null,N(s(c),a=>(b(),u("option",{key:a.slug,value:a.slug},k(a.name),9,A))),128))],512),[[x,s(r).topic_slug]])])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Screenshot (optional) ",-1)),t("input",{type:"file",accept:"image/*",onChange:w,class:"block w-full border border-gray-300 dark:border-gray-700 rounded-md px-4 py-2 text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-800 file:bg-gray-100 file:dark:bg-gray-700 file:border-0 file:px-4 file:py-2"},null,32),s(r).screenshot?(b(),u("div",Y," Selected: "+k(s(r).screenshot.name),1)):q("",!0)]),t("div",$,[t("button",{type:"submit",class:"w-full sm:w-auto px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",disabled:!s(r).title||!s(r).description||!s(r).topic_slug},[n(i,{name:"mdi-send",class:"inline-block mr-2 -mt-1"}),e[12]||(e[12]=p(" Submit Ticket "))],8,O)])],32),t("div",Q,[t("h2",W,[n(i,{name:"mdi-frequently-asked-questions",class:"text-xl text-blue-500"}),e[13]||(e[13]=p(" Frequently Asked Questions "))]),e[15]||(e[15]=t("ul",{class:"space-y-2 text-sm text-gray-700 dark:text-gray-300 list-disc list-inside"},[t("li",null,"Check the Help Center for common issues."),t("li",null,"Include browser info and relevant screenshots."),t("li",null,"Use a clear title describing the problem.")],-1)),t("div",Z,[n(T,{to:"/dashboard/faq"},{default:U(()=>[t("button",j,[n(i,{name:"mdi-book-open-page-variant",class:"inline-block mr-2 -mt-1"}),e[14]||(e[14]=p(" Browse Help Center "))])]),_:1})])])])}}});export{K as default};
