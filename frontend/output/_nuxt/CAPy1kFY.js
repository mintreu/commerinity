import{b4 as Y,br as W,aW as G,bd as p,ba as H,bA as X,aY as a,b5 as e,bg as i,aZ as h,b9 as t,bl as n,bm as v,b8 as u,bB as Z,bk as P,bu as V,bc as J,a_ as l,aX as K}from"./B132AJ_X.js";import{m as Q,f as ee}from"./B4utk0fH.js";import{u as se}from"./DVwEWGMy.js";(function(){try{var d=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};d.SENTRY_RELEASE={id:"3703708ef9ac1b45e23fc2a6a145a79341d4c60a"}}catch{}})();try{(function(){var d=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},f=new d.Error().stack;f&&(d._sentryDebugIds=d._sentryDebugIds||{},d._sentryDebugIds[f]="d4124d8b-984e-4181-8112-02a48a28ca04",d._sentryDebugIdIdentifier="sentry-dbid-d4124d8b-984e-4181-8112-02a48a28ca04")})()}catch{}const oe={class:"max-w-5xl mx-auto py-10 px-4 sm:px-6 lg:px-8"},te={class:"bg-white dark:bg-gray-800 shadow rounded-xl mb-10 overflow-hidden"},re={class:"grid grid-cols-1 md:grid-cols-[250px_1fr] divide-y md:divide-y-0 md:divide-x divide-gray-200 dark:divide-gray-700"},ae={class:"p-6 flex flex-col gap-6"},le={class:"flex justify-center"},ie={class:"relative w-40 h-40 rounded-full overflow-hidden border-4 border-white shadow-md cursor-pointer group"},de=["src"],ne={key:1,class:"w-full h-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-300 text-sm"},ue={key:0,class:"flex-1 space-y-4"},pe={class:"relative w-full max-w-md aspect-square border rounded overflow-hidden bg-gray-100 dark:bg-gray-700"},me={class:"grid grid-cols-1 md:grid-cols-[250px_1fr] divide-y md:divide-y-0 md:divide-x divide-gray-200 dark:divide-gray-700"},ce={class:"p-6 space-y-6 flex flex-col"},fe={class:"flex flex-col gap-4"},ge={class:"gap-2 my-2"},ve={key:0,class:"form-error"},ye={class:"gap-2 my-2"},be={key:0,class:"form-error"},we={class:"gap-2 my-2"},xe={key:0,class:"form-error"},_e={class:"gap-2 my-2"},he={key:0,class:"form-error"},ke={class:"flex flex-row"},Ce=["disabled"],Ue={class:"grid grid-cols-1 md:grid-cols-[250px_1fr] divide-y md:divide-y-0 md:divide-x divide-gray-200 dark:divide-gray-700"},Ie={class:"p-6 space-y-6"},Se={class:"flex flex-col gap-4"},Pe={class:"gap-2 my-2"},Ve={key:0,class:"form-error"},Be={class:"gap-2 my-2"},De={key:0,class:"form-error"},Re={class:"flex flex-row"},Me=["disabled"],Ee={class:"grid grid-cols-1 md:grid-cols-[250px_1fr] divide-y md:divide-y-0 md:divide-x divide-gray-200 dark:divide-gray-700"},Te={class:"p-6 space-y-6"},Ne={class:"flex flex-col gap-4"},qe={class:"gap-2 my-2"},Ae={class:"relative"},je=["type"],Fe={key:0,class:"form-error"},Oe={class:"gap-2 my-2"},$e={class:"relative"},ze=["type"],Le={key:0,class:"form-error"},Ye={class:"gap-2 my-2"},We={class:"relative"},Ge=["type"],He={key:0,class:"form-error"},Xe={class:"flex flex-row"},Ze=["disabled"],Je=Y({__name:"edit-old",setup(d){var B,D,R,M,E,T;const f=G(),{user:m,refreshUser:k}=W(),o=se("POST",`${f.public.apiBase}/user/profile`,{name:((B=m.value)==null?void 0:B.name)??"",email:((D=m.value)==null?void 0:D.email)??"",mobile:((R=m.value)==null?void 0:R.mobile)??"",bio:((M=m.value)==null?void 0:M.bio)??"",gender:((E=m.value)==null?void 0:E.gender)??"",dob:((T=m.value)==null?void 0:T.dob)??"",current_password:"",password:"",password_confirmation:""}),y=p(null),C=p(null),U=p(null);function A(_){var c,r;const s=(r=(c=_.target)==null?void 0:c.files)==null?void 0:r[0];if(s){const N=new FileReader;N.onload=L=>{var q;y.value=(q=L.target)==null?void 0:q.result},N.readAsDataURL(s)}}function j({canvas:_}){U.value=_}function F(){U.value&&(C.value=U.value.toDataURL(),y.value=null)}const b=p(!1),w=p(!1),x=p(!1),g=p(null);function I(){g.value&&(g.value.style.height="auto",g.value.style.height=g.value.scrollHeight+"px")}H(I),X(()=>o.bio,I);function O(){S(),o.submit({only:["name","mobile","gender","dob"]}).then(k)}function $(){S(),o.submit({only:["email","bio"]}).then(k)}function z(){S(),!(o.current_password.length<6||o.password.length<8||o.password!==o.password_confirmation)&&o.submit({only:["current_password","password","password_confirmation"]}).then(k)}function S(){o.errors={}}return(_,s)=>{const c=J;return l(),a("div",oe,[s[30]||(s[30]=e("div",{class:"flex items-center justify-between mb-10"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"My Account"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Manage your personal profile and secure your account. ")])],-1)),e("div",te,[e("div",re,[s[13]||(s[13]=e("div",{class:"p-6"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Profile Picture"),e("p",{class:"text-sm md:hidden text-gray-600 dark:text-gray-400"},"Upload and crop your profile avatar.")],-1)),e("div",ae,[e("div",le,[e("div",ie,[e("input",{type:"file",accept:"image/*",onChange:A,class:"absolute inset-0 opacity-0 z-10 cursor-pointer"},null,32),C.value?(l(),a("img",{key:0,src:C.value,class:"w-full h-full object-cover rounded-full"},null,8,de)):(l(),a("div",ne," Click to Upload ")),s[12]||(s[12]=e("div",{class:"absolute inset-0 bg-black bg-opacity-20 hidden group-hover:flex items-center justify-center text-white font-medium"}," Change ",-1))])]),y.value?(l(),a("div",ue,[e("div",pe,[h(t(ee),{class:"cropper",src:y.value,"stencil-component":t(Q),"stencil-props":{aspectRatio:1},"auto-zoom":!0,onChange:j},null,8,["src","stencil-component"])]),e("div",{class:"text-right"},[e("button",{class:"btn-primary",onClick:F},"Save Avatar")])])):i("",!0)])])]),e("form",{onSubmit:P(O,["prevent"]),class:"bg-white dark:bg-gray-800 shadow rounded-xl"},[e("div",me,[s[20]||(s[20]=e("div",{class:"p-6"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Basic Information"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"This is how your profile appears across the system.")],-1)),e("div",ce,[e("div",fe,[e("div",ge,[s[14]||(s[14]=e("label",null,"Name",-1)),n(e("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>t(o).name=r),type:"text",class:"form-input",required:"",minlength:"3",placeholder:"Your full name"},null,512),[[v,t(o).name]]),t(o).errors.name?(l(),a("span",ve,u(t(o).errors.name),1)):i("",!0)]),e("div",ye,[s[15]||(s[15]=e("label",null,"Mobile",-1)),n(e("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>t(o).mobile=r),type:"tel",class:"form-input",required:"",placeholder:"+91 98765 43210"},null,512),[[v,t(o).mobile]]),t(o).errors.mobile?(l(),a("span",be,u(t(o).errors.mobile),1)):i("",!0)]),e("div",we,[s[17]||(s[17]=e("label",null,"Gender",-1)),n(e("select",{"onUpdate:modelValue":s[2]||(s[2]=r=>t(o).gender=r),class:"form-input",required:""},s[16]||(s[16]=[e("option",{value:""},"Select gender",-1),e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1),e("option",{value:"other"},"Other",-1)]),512),[[Z,t(o).gender]]),t(o).errors.gender?(l(),a("span",xe,u(t(o).errors.gender),1)):i("",!0)]),e("div",_e,[s[18]||(s[18]=e("label",null,"Date of Birth",-1)),n(e("input",{"onUpdate:modelValue":s[3]||(s[3]=r=>t(o).dob=r),type:"date",class:"form-input",required:""},null,512),[[v,t(o).dob]]),t(o).errors.dob?(l(),a("span",he,u(t(o).errors.dob),1)):i("",!0)])]),e("div",ke,[s[19]||(s[19]=e("div",{class:"grow hidden md:block"},null,-1)),e("button",{type:"submit",class:"btn-primary",disabled:t(o).processing},"Update Info",8,Ce)])])])],32),e("form",{onSubmit:P($,["prevent"]),class:"bg-white dark:bg-gray-800 shadow rounded-xl mt-10"},[e("div",Ue,[s[24]||(s[24]=e("div",{class:"p-6"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Contact & Bio"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Optional contact details and bio for profile enrichment.")],-1)),e("div",Ie,[e("div",Se,[e("div",Pe,[s[21]||(s[21]=e("label",null,"Email",-1)),n(e("input",{"onUpdate:modelValue":s[4]||(s[4]=r=>t(o).email=r),type:"email",class:"form-input",placeholder:"your@email.com"},null,512),[[v,t(o).email]]),t(o).errors.email?(l(),a("span",Ve,u(t(o).errors.email),1)):i("",!0)]),e("div",Be,[s[22]||(s[22]=e("label",null,"Bio",-1)),n(e("textarea",{ref_key:"bioRef",ref:g,"onUpdate:modelValue":s[5]||(s[5]=r=>t(o).bio=r),class:"form-input overflow-hidden",rows:"2",maxlength:"500",placeholder:"Write something about yourself",onInput:I},null,544),[[v,t(o).bio]]),t(o).errors.bio?(l(),a("span",De,u(t(o).errors.bio),1)):i("",!0)])]),e("div",Re,[s[23]||(s[23]=e("div",{class:"grow hidden md:block"},null,-1)),e("button",{type:"submit",class:"btn-primary",disabled:t(o).processing},"Save Contact Info",8,Me)])])])],32),e("form",{onSubmit:P(z,["prevent"]),class:"bg-white dark:bg-gray-800 shadow rounded-xl mt-10"},[e("div",Ee,[s[29]||(s[29]=e("div",{class:"p-6"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Change Password"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Use a strong and unique password to secure your account.")],-1)),e("div",Te,[e("div",Ne,[e("div",qe,[s[25]||(s[25]=e("label",null,"Current Password",-1)),e("div",Ae,[n(e("input",{type:b.value?"text":"password","onUpdate:modelValue":s[6]||(s[6]=r=>t(o).current_password=r),class:"form-input pr-10"},null,8,je),[[V,t(o).current_password]]),e("span",{class:"absolute right-3 top-2.5 cursor-pointer",onClick:s[7]||(s[7]=r=>b.value=!b.value)},[h(c,{name:b.value?"mdi:eye-off":"mdi:eye"},null,8,["name"])])]),t(o).errors.current_password?(l(),a("span",Fe,u(t(o).errors.current_password),1)):i("",!0)]),e("div",Oe,[s[26]||(s[26]=e("label",null,"New Password",-1)),e("div",$e,[n(e("input",{type:w.value?"text":"password","onUpdate:modelValue":s[8]||(s[8]=r=>t(o).password=r),class:"form-input pr-10"},null,8,ze),[[V,t(o).password]]),e("span",{class:"absolute right-3 top-2.5 cursor-pointer",onClick:s[9]||(s[9]=r=>w.value=!w.value)},[h(c,{name:w.value?"mdi:eye-off":"mdi:eye"},null,8,["name"])])]),t(o).errors.password?(l(),a("span",Le,u(t(o).errors.password),1)):i("",!0)]),e("div",Ye,[s[27]||(s[27]=e("label",null,"Confirm Password",-1)),e("div",We,[n(e("input",{type:x.value?"text":"password","onUpdate:modelValue":s[10]||(s[10]=r=>t(o).password_confirmation=r),class:"form-input pr-10"},null,8,Ge),[[V,t(o).password_confirmation]]),e("span",{class:"absolute right-3 top-2.5 cursor-pointer",onClick:s[11]||(s[11]=r=>x.value=!x.value)},[h(c,{name:x.value?"mdi:eye-off":"mdi:eye"},null,8,["name"])])]),t(o).errors.password_confirmation?(l(),a("span",He,u(t(o).errors.password_confirmation),1)):i("",!0)])]),e("div",Xe,[s[28]||(s[28]=e("div",{class:"grow hidden md:block"},null,-1)),e("button",{type:"submit",class:"btn-primary",disabled:t(o).processing},"Update Password",8,Ze)])])])],32)])}}}),ss=K(Je,[["__scopeId","data-v-b982d273"]]);export{ss as default};
