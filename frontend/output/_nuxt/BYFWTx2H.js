import{_ as N}from"./CzGapVpC.js";import{b4 as R,bC as A,bi as L,bd as _,ba as j,by as x,aY as u,bj as k,b9 as l,b5 as e,aZ as c,bt as b,b8 as a,be as w,bf as v,bo as B,aW as I,a_ as n,bh as T,b7 as p,bE as O}from"./B132AJ_X.js";(function(){try{var d=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};d.SENTRY_RELEASE={id:"3703708ef9ac1b45e23fc2a6a145a79341d4c60a"}}catch{}})();try{(function(){var d=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},g=new d.Error().stack;g&&(d._sentryDebugIds=d._sentryDebugIds||{},d._sentryDebugIds[g]="165d8ee8-d5de-404a-a3b6-eee30fcd3f14",d._sentryDebugIdIdentifier="sentry-dbid-165d8ee8-d5de-404a-a3b6-eee30fcd3f14")})()}catch{}const V={class:"p-4 sm:p-6 space-y-6 sm:space-y-8"},z={key:1,class:"w-full h-full"},F={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},P={class:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4"},M={class:"p-4 rounded-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 shadow-sm"},Y={class:"mt-1 text-2xl sm:text-3xl font-extrabold text-yellow-600"},H={class:"p-4 rounded-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 shadow-sm"},U={class:"mt-1 text-2xl sm:text-3xl font-extrabold text-green-600"},W={class:"p-4 rounded-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 shadow-sm"},Z={class:"mt-1 text-2xl sm:text-3xl font-extrabold text-gray-900 dark:text-gray-100"},q={class:"md:hidden space-y-3",role:"list","aria-label":"Tickets"},G={class:"flex items-start justify-between gap-3"},J={class:"min-w-0"},K={class:"text-[11px] text-gray-500 dark:text-gray-400 font-mono truncate"},Q={class:"mt-0.5 text-base font-semibold text-gray-900 dark:text-gray-100 truncate"},X={class:"mt-2 flex items-center justify-between text-[11px] sm:text-xs"},ee={class:"text-gray-700 dark:text-gray-300"},te={class:"text-gray-500 dark:text-gray-400"},se={class:"hidden md:block overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-800 shadow-sm"},ae={class:"min-w-full text-sm text-left bg-white dark:bg-gray-950 border-separate border-spacing-y-0"},re={class:"px-4 py-3 text-gray-900 dark:text-gray-100 font-mono"},de={class:"px-4 py-3 text-gray-900 dark:text-gray-100 truncate max-w-xs"},oe={class:"px-4 py-3"},le={class:"px-4 py-3 text-gray-900 dark:text-gray-100"},ne={class:"px-4 py-3 text-gray-600 dark:text-gray-400 whitespace-nowrap"},ie={class:"px-4 py-3 text-right"},ge={class:"flex justify-center mt-6 gap-2"},ye=["disabled"],ue=["disabled"],m=5,ce=R({__name:"index",setup(d){const g=I(),f=A("pageLoading",()=>!1),C=L(),y=_(1),i=_([]);async function E(){try{f.value=!0;const s=(await B(`${g.public.apiBase}/helpdesk/tickets`)).data??[];i.value=s.map(r=>({uuid:r.uuid,title:r.title,status:r.status,priority:r.priority,createdAt:new Date(r.created_at).toLocaleString()}))}catch{C.error({title:"Error",message:"❌ Failed to load tickets",timeout:3e3})}finally{f.value=!1}}j(E);const S=x(()=>Math.ceil(i.value.length/m)),h=x(()=>{const o=(y.value-1)*m;return i.value.slice(o,o+m)}),$=x(()=>i.value.filter(o=>o.status==="Open").length),D=x(()=>i.value.filter(o=>o.status==="Resolved").length);return(o,s)=>{const r=N;return n(),u("div",V,[l(f)?(n(),k(O,{key:0})):(n(),u("div",z,[e("div",F,[s[3]||(s[3]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100"},"Help Desk",-1)),c(r,{to:"/dashboard/helpdesk/create",class:"self-start sm:self-auto"},{default:b(()=>s[2]||(s[2]=[e("button",{class:"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e("span",{class:"text-lg leading-none"},"＋"),e("span",{class:"text-sm font-medium"},"New Ticket")],-1)])),_:1,__:[2]})]),e("div",P,[e("div",M,[s[4]||(s[4]=e("p",{class:"text-xs sm:text-sm text-gray-500 dark:text-gray-400"},"Open Tickets",-1)),e("h2",Y,a(l($)),1)]),e("div",H,[s[5]||(s[5]=e("p",{class:"text-xs sm:text-sm text-gray-500 dark:text-gray-400"},"Resolved Tickets",-1)),e("h2",U,a(l(D)),1)]),e("div",W,[s[6]||(s[6]=e("p",{class:"text-xs sm:text-sm text-gray-500 dark:text-gray-400"},"Total Tickets",-1)),e("h2",Z,a(l(i).length),1)])]),e("div",q,[(n(!0),u(w,null,v(l(h),t=>(n(),k(r,{key:t.uuid,to:`/dashboard/helpdesk/${t.uuid}`,class:"block rounded-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 shadow-sm p-4 hover:bg-gray-50 dark:hover:bg-gray-800/80 transition",role:"listitem"},{default:b(()=>[e("div",G,[e("div",J,[e("p",K,a(t.uuid),1),e("h3",Q,a(t.title),1)]),e("span",{class:T(["shrink-0 inline-block px-2 py-1 text-[10px] font-medium rounded-full",t.status==="Open"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":t.status==="Resolved"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"])},a(t.status),3)]),e("div",X,[e("span",ee,[s[7]||(s[7]=p("Priority: ")),e("b",null,a(t.priority),1)]),e("span",te,a(t.createdAt),1)])]),_:2},1032,["to"]))),128))]),e("div",se,[e("table",ae,[s[9]||(s[9]=e("thead",{class:"bg-gray-50 dark:bg-gray-900 text-gray-700 dark:text-gray-200 sticky top-0 z-10"},[e("tr",null,[e("th",{class:"px-4 py-3 font-medium"},"Ticket"),e("th",{class:"px-4 py-3 font-medium"},"Title"),e("th",{class:"px-4 py-3 font-medium"},"Status"),e("th",{class:"px-4 py-3 font-medium"},"Priority"),e("th",{class:"px-4 py-3 font-medium"},"Created At"),e("th",{class:"px-4 py-3 font-medium sr-only"},"Actions")])],-1)),e("tbody",null,[(n(!0),u(w,null,v(l(h),t=>(n(),u("tr",{key:t.uuid,class:"border-t border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-900/50 transition"},[e("td",re,[c(r,{to:`/dashboard/helpdesk/${t.uuid}`,class:"hover:underline"},{default:b(()=>[p(a(t.uuid),1)]),_:2},1032,["to"])]),e("td",de,[c(r,{to:`/dashboard/helpdesk/${t.uuid}`,class:"hover:underline"},{default:b(()=>[p(a(t.title),1)]),_:2},1032,["to"])]),e("td",oe,[e("span",{class:T(["inline-block px-2 py-1 text-xs font-medium rounded-full",t.status==="Open"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":t.status==="Resolved"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"])},a(t.status),3)]),e("td",le,a(t.priority),1),e("td",ne,a(t.createdAt),1),e("td",ie,[c(r,{to:`/dashboard/helpdesk/${t.uuid}`,class:"text-sm text-blue-600 dark:text-blue-400 hover:underline"},{default:b(()=>s[8]||(s[8]=[p(" View ")])),_:2,__:[8]},1032,["to"])])]))),128))])])]),e("div",ge,[e("button",{class:"px-4 py-2 border rounded-md bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50",disabled:l(y)===1,onClick:s[0]||(s[0]=t=>y.value--)}," Prev ",8,ye),e("button",{class:"px-4 py-2 border rounded-md bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50",disabled:l(y)>=l(S),onClick:s[1]||(s[1]=t=>y.value++)}," Next ",8,ue)])]))])}}});export{ce as default};
