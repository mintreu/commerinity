import{b4 as Y,bp as G,bC as W,bd as g,ba as X,aW as Z,bo as q,bA as H,by as v,aY as _,bj as K,b9 as Q,b5 as e,bl as V,bm as ee,bB as j,aZ as c,bg as te,be as ae,bf as se,b8 as r,bc as oe,a_ as b,bh as B,b7 as x,bE as re,aX as le}from"./B132AJ_X.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};n.SENTRY_RELEASE={id:"3703708ef9ac1b45e23fc2a6a145a79341d4c60a"}}catch{}})();try{(function(){var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},y=new n.Error().stack;y&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[y]="06d180eb-8771-4d30-89f9-171f994222e6",n._sentryDebugIdIdentifier="sentry-dbid-06d180eb-8771-4d30-89f9-171f994222e6")})()}catch{}const ne={class:"w-full h-full flex flex-col"},de={key:1,class:"flex-1 flex flex-col p-4 gap-4"},ie={class:"shrink-0 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 w-full overflow-hidden"},ce={class:"w-full sm:w-auto grid grid-cols-1 sm:grid-cols-[1fr_auto_auto_auto] gap-2"},ue=["aria-label"],ge={class:"flex-1 rounded-lg shadow bg-white dark:bg-gray-900 overflow-hidden",role:"region","aria-label":"Applications table"},be={class:"h-full w-full overflow-auto"},xe={class:"min-w-max w-full border-collapse divide-y divide-gray-200 dark:divide-gray-700"},ye={class:"divide-y divide-gray-200 dark:divide-gray-700"},fe={class:"p-3 text-sm font-medium text-gray-900 dark:text-gray-100 hidden md:table-cell"},me={class:"p-3 text-sm text-gray-600 dark:text-gray-300 hidden md:table-cell"},pe={class:"p-3 text-sm text-gray-600 dark:text-gray-300 hidden md:table-cell"},he={class:"p-3 text-sm text-gray-600 dark:text-gray-300 hidden md:table-cell"},ve={class:"p-3 text-sm hidden md:table-cell"},_e={class:"p-3 text-sm hidden md:table-cell"},ke={class:"flex justify-end gap-2"},we=["onClick"],Ce={class:"p-3 md:hidden",colspan:"6"},Se={class:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm bg-gray-50 dark:bg-gray-800 flex flex-col gap-3"},Ve={class:"flex items-center gap-2 text-gray-900 dark:text-gray-100 font-semibold"},De={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300"},Te={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300"},Ne={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300"},Ae={class:"flex items-center gap-2 text-sm"},Ie={class:"flex gap-2 pt-2"},Le=["onClick"],Pe={key:0},Ee={class:"shrink-0 flex flex-col sm:flex-row justify-between items-center gap-3 w-full"},Me={class:"text-sm text-gray-600 dark:text-gray-400"},je={class:"flex items-center gap-2"},Be=["disabled"],$e=["disabled"],k=5,Fe=Y({__name:"index",setup(n){const y=Z(),$=G(),S=W("pageLoading",()=>!1),D=g([]),f=g(""),m=g(""),w=g("submit_on"),u=g("desc"),d=g(1);X(async()=>{S.value=!0;try{await F()}finally{S.value=!1}});async function F(){try{const s=`${y.public.apiBase}/account/applications`,t=await q(s,{method:"GET"});t!=null&&t.data&&(D.value=t.data)}catch(s){console.error("Failed to fetch applications:",s)}}H([f,m],()=>{d.value=1});const C=v(()=>{let s=D.value;if(f.value.trim()){const o=f.value.toLowerCase();s=s.filter(a=>{var l,i;return(i=(l=a.recruitment)==null?void 0:l.name)==null?void 0:i.toLowerCase().includes(o)})}m.value&&(s=s.filter(o=>(o.status||"")===m.value));const t=(o,a)=>a.split(".").reduce((l,i)=>l==null?void 0:l[i],o);return[...s].sort((o,a)=>{const l=t(o,w.value),i=t(a,w.value),p=l??"",h=i??"";return p<h?u.value==="asc"?-1:1:p>h?u.value==="asc"?1:-1:0})}),T=v(()=>Math.max(1,Math.ceil(C.value.length/k))),N=v(()=>{const s=(d.value-1)*k;return C.value.slice(s,s+k)}),A=v(()=>(d.value-1)*k),R=v(()=>Math.min(A.value+k,C.value.length));function J(){d.value>1&&d.value--}function U(){d.value<T.value&&d.value++}function z(){u.value=u.value==="asc"?"desc":"asc"}function I(s){$.push(`/dashboard/career/applications/${s==null?void 0:s.uuid}`)}function L(s){if(!s)return"-";const t=new Date(s);return isNaN(t.getTime())?s:t.toLocaleDateString()}function P(s){const t=((s==null?void 0:s.status)||"").toLowerCase();return t.includes("await")?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":t.includes("paid")?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}return(s,t)=>{const o=oe;return b(),_("div",ne,[Q(S)?(b(),K(re,{key:0})):(b(),_("div",de,[e("div",ie,[t[5]||(t[5]=e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100"}," My Job Applications ",-1)),e("div",ce,[V(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>f.value=a),type:"text",placeholder:"Search job titleâ€¦",class:"px-3 py-2 rounded-lg border dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 w-full"},null,512),[[ee,f.value]]),V(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>m.value=a),class:"px-3 py-2 rounded-lg border dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 w-full"},t[3]||(t[3]=[e("option",{value:""},"All Status",-1),e("option",{value:"Awaiting Payment"},"Awaiting Payment",-1),e("option",{value:"Paid"},"Paid",-1)]),512),[[j,m.value]]),V(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>w.value=a),class:"px-3 py-2 rounded-lg border dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 w-full"},t[4]||(t[4]=[e("option",{value:"submit_on"},"Submit Date",-1),e("option",{value:"recruitment.name"},"Job Title",-1),e("option",{value:"status"},"Status",-1)]),512),[[j,w.value]]),e("button",{onClick:z,class:"px-3 py-2 rounded-lg border dark:border-gray-700 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-center","aria-label":`Toggle sort (${u.value})`,type:"button"},[c(o,{name:u.value==="asc"?"heroicons:arrow-up":"heroicons:arrow-down",class:"w-5 h-5"},null,8,["name"])],8,ue)])]),e("div",ge,[e("div",be,[e("table",xe,[t[9]||(t[9]=e("thead",{class:"bg-gray-100 dark:bg-gray-800 sticky top-0 z-10 hidden md:table-header-group"},[e("tr",null,[e("th",{class:"p-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Job"),e("th",{class:"p-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Type"),e("th",{class:"p-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Location"),e("th",{class:"p-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Submitted"),e("th",{class:"p-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Status"),e("th",{class:"p-3 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Actions")])],-1)),e("tbody",ye,[(b(!0),_(ae,null,se(N.value,a=>{var l,i,p,h,E,M;return b(),_("tr",{key:a.uuid,class:"hover:bg-gray-50 dark:hover:bg-gray-800 transition"},[e("td",fe,r((l=a.recruitment)==null?void 0:l.name),1),e("td",me,r((i=a.recruitment)==null?void 0:i.type),1),e("td",pe,r((p=a.recruitment)==null?void 0:p.location),1),e("td",he,r(L(a.submit_on)),1),e("td",ve,[e("span",{class:B(["px-2 py-1 rounded-full text-xs font-semibold",P(a)])},r(a.status),3)]),e("td",_e,[e("div",ke,[e("button",{class:"px-3 py-1.5 rounded-lg border border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white text-sm flex items-center gap-1",onClick:O=>I(a),type:"button"},[c(o,{name:"heroicons:eye",class:"w-4 h-4"}),t[6]||(t[6]=x(" View "))],8,we)])]),e("td",Ce,[e("div",Se,[e("div",Ve,[c(o,{name:"heroicons:briefcase",class:"w-5 h-5 text-blue-500"}),x(" "+r((h=a.recruitment)==null?void 0:h.name),1)]),e("div",De,[c(o,{name:"heroicons:document-text",class:"w-4 h-4 text-indigo-500"}),x(" "+r((E=a.recruitment)==null?void 0:E.type),1)]),e("div",Te,[c(o,{name:"heroicons:map-pin",class:"w-4 h-4 text-red-500"}),x(" "+r((M=a.recruitment)==null?void 0:M.location),1)]),e("div",Ne,[c(o,{name:"heroicons:calendar",class:"w-4 h-4 text-amber-500"}),x(" "+r(L(a.submit_on)),1)]),e("div",Ae,[c(o,{name:"heroicons:check-circle",class:"w-4 h-4 text-green-500"}),e("span",{class:B(["px-2 py-0.5 rounded-full text-xs font-semibold",P(a)])},r(a.status),3)]),e("div",Ie,[e("button",{class:"flex-1 px-2 py-1 rounded-md border border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white text-xs flex items-center justify-center gap-1",onClick:O=>I(a),type:"button"},[c(o,{name:"heroicons:eye",class:"w-4 h-4"}),t[7]||(t[7]=x(" View "))],8,Le)])])])])}),128)),N.value.length?te("",!0):(b(),_("tr",Pe,t[8]||(t[8]=[e("td",{colspan:"6",class:"p-6 text-center text-sm text-gray-600 dark:text-gray-300"}," No applications found. ",-1)])))])])])]),e("div",Ee,[e("p",Me," Showing "+r(A.value+1)+" - "+r(R.value)+" of "+r(C.value.length)+" results ",1),e("div",je,[e("button",{onClick:J,disabled:d.value===1,class:"px-3 py-1 rounded border dark:border-gray-700 dark:bg-gray-800 disabled:opacity-50",type:"button"}," Prev ",8,Be),e("button",{onClick:U,disabled:d.value===T.value,class:"px-3 py-1 rounded border dark:border-gray-700 dark:bg-gray-800 disabled:opacity-50",type:"button"}," Next ",8,$e)])])]))])}}}),Je=le(Fe,[["__scopeId","data-v-f2c80b33"]]);export{Je as default};
