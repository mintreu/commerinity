import{b4 as N,br as T,bi as A,bd as D,by as f,aY as l,b5 as a,bg as v,be as O,bf as P,bG as L,b8 as i,bo as x,aW as Y,a_ as r,bh as w,b7 as k,aZ as F,bc as V,bj as K,bt as R,aX as U}from"./B132AJ_X.js";import{_ as j}from"./CzGapVpC.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};o.SENTRY_RELEASE={id:"3703708ef9ac1b45e23fc2a6a145a79341d4c60a"}}catch{}})();try{(function(){var o=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new o.Error().stack;n&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[n]="f688a165-5374-455e-8248-d29cd6eca99a",o._sentryDebugIdIdentifier="sentry-dbid-f688a165-5374-455e-8248-d29cd6eca99a")})()}catch{}const z={class:"p-6 max-w-3xl mx-auto mt-14"},G={class:"space-y-4"},$={class:"font-semibold text-lg flex items-center gap-2"},H={key:0,class:"text-green-600"},M={class:"text-gray-600"},W={class:"text-sm text-gray-400"},X={class:"flex items-center gap-2"},Z={key:1,class:"text-gray-500 text-sm italic"},q={class:"mt-6"},J={class:"w-full bg-gray-200 rounded h-2"},Q={class:"text-sm text-gray-500 mt-1"},ee={key:0,class:"mt-6 text-center"},te=N({__name:"tour",setup(o){T();const n=A(),_=Y(),m=D(null);async function p(){try{const e=await x(`${_.public.apiBase}/account/profile`);m.value=e.data}catch{n.error({title:"Error",message:"Failed to load profile"})}}p();const y=[{to:"/dashboard/account",label:"Profile",description:"Update your personal info"},{to:"/dashboard/account/address",label:"Address",description:"Update your address"},{to:"/dashboard/account/kyc",label:"KYC",description:"Upload Aadhaar & PAN"},{to:"/dashboard/subscribe-now",label:"Subscription",description:"Choose your plan"}];function C(e){var t,s,u;return!!((t=e==null?void 0:e.name)!=null&&t.trim())&&!!((s=e==null?void 0:e.dob)!=null&&s.trim())&&!!((u=e==null?void 0:e.gender)!=null&&u.trim())}function S(e){var t;return((t=e==null?void 0:e.address)==null?void 0:t.type)==="HOME"}function B(e){return!!(e!=null&&e.kyc)}function I(e){return!!(e!=null&&e.hasLevel)||!!(e!=null&&e.level_id)}const c=f(()=>{if(!m.value)return y.map(t=>({...t,completed:!1}));const e=m.value;return y.map(t=>{let s=!1;switch(t.label){case"Profile":s=C(e);break;case"Address":s=S(e);break;case"KYC":s=B(e);break;case"Subscription":s=I(e);break}return{...t,completed:s}})});function h(e){const t=c.value.findIndex(s=>!s.completed);return e===t}const g=f(()=>c.value.filter(e=>e.completed).length);async function E(){try{await x(`${_.public.apiBase}/account/onboarding`,{method:"POST"}),n.success({title:"Success!",message:"Onboarding completed successfully!"}),await p()}catch(e){console.error(e),n.error({title:"Error",message:"Failed to submit onboarding."})}}return(e,t)=>{const s=V,u=j;return r(),l("div",z,[t[1]||(t[1]=a("h1",{class:"text-2xl font-bold mb-6"},"Complete Your Onboarding",-1)),a("div",G,[(r(!0),l(O,null,P(c.value,(d,b)=>(r(),l("div",{key:b,class:w(["p-4 border rounded-lg flex justify-between items-center transition",d.completed?"bg-gray-100 cursor-not-allowed opacity-70":"",h(b)?"ring-2 ring-blue-400":""])},[a("div",null,[a("h3",$,[k(i(d.label)+" ",1),d.completed?(r(),l("span",H,[F(s,{name:"solar:verified-check-broken"})])):v("",!0)]),a("p",M,i(d.description),1),a("p",W,"Step "+i(b+1)+" of "+i(c.value.length),1)]),a("div",X,[d.completed?(r(),l("span",Z,"Completed")):(r(),K(u,{key:0,to:d.to,class:w(["bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",{"opacity-50 cursor-not-allowed pointer-events-none":!h(b)}])},{default:R(()=>t[0]||(t[0]=[k(" Go ")])),_:2,__:[0]},1032,["to","class"]))])],2))),128))]),a("div",q,[a("div",J,[a("div",{class:"bg-green-600 h-2 rounded",style:L({width:g.value/c.value.length*100+"%"})},null,4)]),a("p",Q,i(g.value)+" of "+i(c.value.length)+" steps completed ",1)]),g.value===c.value.length?(r(),l("div",ee,[a("button",{onClick:E,class:"bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700 transition"}," Complete Onboarding ")])):v("",!0)])}}}),oe=U(te,[["__scopeId","data-v-40b1c101"]]);export{oe as default};
