{"version":3,"file":"BYFWTx2H.js","sources":["../../../../pages/dashboard/helpdesk/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-4 sm:p-6 space-y-6 sm:space-y-8\">\r\n    <GlobalLoader v-if=\"isLoading\" />\r\n    <div v-else class=\"w-full h-full\">\r\n      <!-- Header -->\r\n      <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\r\n        <h1 class=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100\">Help Desk</h1>\r\n        <NuxtLink to=\"/dashboard/helpdesk/create\" class=\"self-start sm:self-auto\">\r\n          <button\r\n              class=\"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            <span class=\"text-lg leading-none\">＋</span>\r\n            <span class=\"text-sm font-medium\">New Ticket</span>\r\n          </button>\r\n        </NuxtLink>\r\n      </div>\r\n\r\n      <!-- Stats -->\r\n      <div class=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4\">\r\n        <div class=\"p-4 rounded-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 shadow-sm\">\r\n          <p class=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400\">Open Tickets</p>\r\n          <h2 class=\"mt-1 text-2xl sm:text-3xl font-extrabold text-yellow-600\">{{ openCount }}</h2>\r\n        </div>\r\n        <div class=\"p-4 rounded-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 shadow-sm\">\r\n          <p class=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400\">Resolved Tickets</p>\r\n          <h2 class=\"mt-1 text-2xl sm:text-3xl font-extrabold text-green-600\">{{ resolvedCount }}</h2>\r\n        </div>\r\n        <div class=\"p-4 rounded-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 shadow-sm\">\r\n          <p class=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400\">Total Tickets</p>\r\n          <h2 class=\"mt-1 text-2xl sm:text-3xl font-extrabold text-gray-900 dark:text-gray-100\">{{ tickets.length }}</h2>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Cards (mobile-first) -->\r\n      <div class=\"md:hidden space-y-3\" role=\"list\" aria-label=\"Tickets\">\r\n        <NuxtLink\r\n            v-for=\"ticket in paginatedTickets\"\r\n            :key=\"ticket.uuid\"\r\n            :to=\"`/dashboard/helpdesk/${ticket.uuid}`\"\r\n            class=\"block rounded-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 shadow-sm p-4 hover:bg-gray-50 dark:hover:bg-gray-800/80 transition\"\r\n            role=\"listitem\"\r\n        >\r\n          <div class=\"flex items-start justify-between gap-3\">\r\n            <div class=\"min-w-0\">\r\n              <p class=\"text-[11px] text-gray-500 dark:text-gray-400 font-mono truncate\">{{ ticket.uuid }}</p>\r\n              <h3 class=\"mt-0.5 text-base font-semibold text-gray-900 dark:text-gray-100 truncate\">{{ ticket.title }}</h3>\r\n            </div>\r\n            <span\r\n                :class=\"[\r\n                'shrink-0 inline-block px-2 py-1 text-[10px] font-medium rounded-full',\r\n                ticket.status === 'Open'\r\n                  ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300'\r\n                  : ticket.status === 'Resolved'\r\n                    ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300'\r\n                    : 'bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300'\r\n              ]\"\r\n            >\r\n              {{ ticket.status }}\r\n            </span>\r\n          </div>\r\n          <div class=\"mt-2 flex items-center justify-between text-[11px] sm:text-xs\">\r\n            <span class=\"text-gray-700 dark:text-gray-300\">Priority: <b>{{ ticket.priority }}</b></span>\r\n            <span class=\"text-gray-500 dark:text-gray-400\">{{ ticket.createdAt }}</span>\r\n          </div>\r\n        </NuxtLink>\r\n      </div>\r\n\r\n      <!-- Table (md+) -->\r\n      <div class=\"hidden md:block overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-800 shadow-sm\">\r\n        <table class=\"min-w-full text-sm text-left bg-white dark:bg-gray-950 border-separate border-spacing-y-0\">\r\n          <thead class=\"bg-gray-50 dark:bg-gray-900 text-gray-700 dark:text-gray-200 sticky top-0 z-10\">\r\n          <tr>\r\n            <th class=\"px-4 py-3 font-medium\">Ticket</th>\r\n            <th class=\"px-4 py-3 font-medium\">Title</th>\r\n            <th class=\"px-4 py-3 font-medium\">Status</th>\r\n            <th class=\"px-4 py-3 font-medium\">Priority</th>\r\n            <th class=\"px-4 py-3 font-medium\">Created At</th>\r\n            <th class=\"px-4 py-3 font-medium sr-only\">Actions</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          <tr\r\n              v-for=\"ticket in paginatedTickets\"\r\n              :key=\"ticket.uuid\"\r\n              class=\"border-t border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-900/50 transition\"\r\n          >\r\n            <td class=\"px-4 py-3 text-gray-900 dark:text-gray-100 font-mono\">\r\n              <NuxtLink :to=\"`/dashboard/helpdesk/${ticket.uuid}`\" class=\"hover:underline\">{{ ticket.uuid }}</NuxtLink>\r\n            </td>\r\n            <td class=\"px-4 py-3 text-gray-900 dark:text-gray-100 truncate max-w-xs\">\r\n              <NuxtLink :to=\"`/dashboard/helpdesk/${ticket.uuid}`\" class=\"hover:underline\">{{ ticket.title }}</NuxtLink>\r\n            </td>\r\n            <td class=\"px-4 py-3\">\r\n                <span\r\n                    :class=\"[\r\n                    'inline-block px-2 py-1 text-xs font-medium rounded-full',\r\n                    ticket.status === 'Open'\r\n                      ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300'\r\n                      : ticket.status === 'Resolved'\r\n                        ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300'\r\n                        : 'bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300'\r\n                  ]\"\r\n                >\r\n                  {{ ticket.status }}\r\n                </span>\r\n            </td>\r\n            <td class=\"px-4 py-3 text-gray-900 dark:text-gray-100\">{{ ticket.priority }}</td>\r\n            <td class=\"px-4 py-3 text-gray-600 dark:text-gray-400 whitespace-nowrap\">{{ ticket.createdAt }}</td>\r\n            <td class=\"px-4 py-3 text-right\">\r\n              <NuxtLink\r\n                  :to=\"`/dashboard/helpdesk/${ticket.uuid}`\"\r\n                  class=\"text-sm text-blue-600 dark:text-blue-400 hover:underline\"\r\n              >\r\n                View\r\n              </NuxtLink>\r\n            </td>\r\n          </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <!-- Pagination -->\r\n      <div class=\"flex justify-center mt-6 gap-2\">\r\n        <button\r\n            class=\"px-4 py-2 border rounded-md bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50\"\r\n            :disabled=\"page === 1\"\r\n            @click=\"page--\"\r\n        >\r\n          Prev\r\n        </button>\r\n        <button\r\n            class=\"px-4 py-2 border rounded-md bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50\"\r\n            :disabled=\"page >= pageCount\"\r\n            @click=\"page++\"\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script setup lang=\"ts\">\r\nimport { useRuntimeConfig, useSanctumFetch, useToast } from '#imports'\r\nimport GlobalLoader from '~/components/GlobalLoader.vue'\r\n\r\ndefinePageMeta({ layout: 'dashboard' })\r\n\r\nconst config = useRuntimeConfig()\r\nconst isLoading = useState('pageLoading', () => false)\r\nconst toast = useToast()\r\n\r\nconst page = ref(1)\r\nconst pageSize = 5\r\nconst tickets = ref<Array<{ uuid: string; title: string; status: string; priority: string; createdAt: string }>>([])\r\n\r\nasync function fetchUserTickets() {\r\n  try {\r\n    isLoading.value = true\r\n    const res: any = await useSanctumFetch(`${config.public.apiBase}/helpdesk/tickets`)\r\n    const list = res.data ?? []\r\n    tickets.value = list.map((t: any) => ({\r\n      uuid: t.uuid,\r\n      title: t.title,\r\n      status: t.status,\r\n      priority: t.priority,\r\n      createdAt: new Date(t.created_at).toLocaleString()\r\n    }))\r\n  } catch (e) {\r\n    toast.error({ title: 'Error', message: '❌ Failed to load tickets', timeout: 3000 })\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\nonMounted(fetchUserTickets)\r\n\r\nconst pageCount = computed(() => Math.ceil(tickets.value.length / pageSize))\r\nconst paginatedTickets = computed(() => {\r\n  const start = (page.value - 1) * pageSize\r\n  return tickets.value.slice(start, start + pageSize)\r\n})\r\n\r\nconst openCount = computed(() => tickets.value.filter(t => t.status === 'Open').length)\r\nconst resolvedCount = computed(() => tickets.value.filter(t => t.status === 'Resolved').length)\r\n</script>\r\n"],"names":["pageSize","config","useRuntimeConfig","isLoading","useState","toast","useToast","page","ref","tickets","fetchUserTickets","list","useSanctumFetch","t","onMounted","pageCount","computed","paginatedTickets","start","openCount","resolvedCount","_openBlock","_createElementBlock","_hoisted_1","_unref","_createBlock","GlobalLoader","_hoisted_2","_createElementVNode","_hoisted_3","_cache","_createVNode","_component_NuxtLink","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_Fragment","_renderList","ticket","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_normalizeClass","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_createTextVNode","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29"],"mappings":"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"}