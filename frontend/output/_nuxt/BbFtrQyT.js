import{b4 as O,bC as j,bd as R,by as _,ba as q,aY as r,bj as V,bg as c,b9 as F,b5 as t,b8 as o,bh as M,aZ as P,b7 as w,be as Q,bf as Y,bo as k,aW as z,bJ as G,bc as J,a_ as l,bt as K,bE as U}from"./B132AJ_X.js";import{_ as W}from"./CzGapVpC.js";import{s as Z}from"./BjZ6Woku.js";(function(){try{var d=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};d.SENTRY_RELEASE={id:"3703708ef9ac1b45e23fc2a6a145a79341d4c60a"}}catch{}})();try{(function(){var d=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new d.Error().stack;i&&(d._sentryDebugIds=d._sentryDebugIds||{},d._sentryDebugIds[i]="49236c59-2c70-40d7-9439-b99cc05f419a",d._sentryDebugIdIdentifier="sentry-dbid-49236c59-2c70-40d7-9439-b99cc05f419a")})()}catch{}const H={class:"w-full h-full flex flex-col"},X={key:1,class:"p-4 sm:p-8 lg:p-12 space-y-8"},ee={class:"p-4 rounded-xl border bg-white dark:bg-gray-900 dark:border-gray-700 shadow-sm space-y-4"},te={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},se={class:"font-mono text-gray-800 dark:text-gray-100"},ae={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},oe={class:"font-semibold"},ne={class:"font-semibold"},le={class:"font-semibold"},re={key:0,class:"p-4 rounded-lg bg-yellow-50 dark:bg-yellow-900 border dark:border-yellow-700 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},de={class:"text-sm text-gray-600 dark:text-gray-300"},ie={class:"font-bold"},ue={class:"space-y-3"},ce={class:"flex items-center gap-4"},pe=["src"],ge={class:"space-y-1"},be={class:"text-xs text-gray-500 dark:text-gray-400"},fe={class:"text-sm"},ye={class:"text-sm"},ve={class:"flex flex-col gap-2"},xe=["onClick"],me=["onClick"],he=["onClick"],_e={class:"flex flex-wrap gap-3"},we={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ke={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800 border dark:border-gray-700"},Ce={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800 border dark:border-gray-700"},Re=O({__name:"index",setup(d){const i=z(),g=G(),p=j("pageLoading",()=>!1),a=R(null),f=R(""),y=[{value:"processing",label:"Processing",icon:"heroicons:arrow-path",class:"status-yellow"},{value:"pending",label:"Pending",icon:"heroicons:clock",class:"status-blue"},{value:"payment_failed",label:"Payment Failed",icon:"heroicons:x-circle",class:"status-red"},{value:"confirm",label:"Confirm",icon:"heroicons:check-circle",class:"status-green"},{value:"review",label:"Review",icon:"heroicons:eye",class:"status-purple"},{value:"accepted",label:"Accepted",icon:"heroicons:check",class:"status-orange"},{value:"ready_to_ship",label:"Ready To Ship",icon:"heroicons:truck",class:"status-teal"},{value:"in_transit",label:"In Transit",icon:"heroicons:truck",class:"status-gray"},{value:"completed",label:"Completed",icon:"heroicons:badge-check",class:"status-green"},{value:"cancelled",label:"Cancelled",icon:"heroicons:ban",class:"status-red"},{value:"refunded",label:"Refunded",icon:"heroicons:arrow-uturn-left",class:"status-blue"}];function S(s){var e;return((e=y.find(u=>u.value===s.toLowerCase()))==null?void 0:e.label)||s}function D(s){var e;return((e=y.find(u=>u.value===s.toLowerCase()))==null?void 0:e.icon)||"heroicons:question-mark-circle"}function T(s){var e;return((e=y.find(u=>u.value===s.toLowerCase()))==null?void 0:e.class)||"status-gray"}function B(s){return new Date(s).toLocaleDateString()}const C=_(()=>{var s,e;return["pending","processing","confirm"].includes((e=(s=a.value)==null?void 0:s.status)==null?void 0:e.toLowerCase())}),$=_(()=>{var s,e;return["completed"].includes((e=(s=a.value)==null?void 0:s.status)==null?void 0:e.toLowerCase())}),L=_(()=>{var s,e;return["completed","return"].includes((e=(s=a.value)==null?void 0:s.status)==null?void 0:e.toLowerCase())});async function v(s){try{p.value=!0,await k(`${i.public.apiBase}/orders/${g.params.uuid}/${s}`,{method:"POST"}),await m()}finally{p.value=!1}}async function x(s,e){try{p.value=!0,await k(`${i.public.apiBase}/orders/${g.params.uuid}/${s}`,{method:"POST",body:{product_id:e.product.sku}}),await m()}finally{p.value=!1}}function E(){window.open(`${i.public.apiBase}/orders/${g.params.uuid}/invoice`,"_blank")}function N(){var s,e;(e=(s=a.value)==null?void 0:s.transaction)!=null&&e.uuid&&(window.location.href=`${i.public.apiBase}/checkout/${a.value.transaction.uuid}`)}function A(s){let e=86400;s.toLowerCase().includes("hour")&&(e=parseInt(s.split(" ")[0])*3600);const u=Z(()=>{if(e<=0){f.value="Expired",clearInterval(u);return}const b=Math.floor(e/3600),n=Math.floor(e%3600/60),h=e%60;f.value=`${b}h ${n}m ${h}s`,e--},1e3)}async function m(){var s;try{p.value=!0;const e=await k(`${i.public.apiBase}/orders/${g.params.uuid}`,{method:"GET"});a.value=e==null?void 0:e.data,((s=a.value)==null?void 0:s.status.toLowerCase())==="pending"&&a.value.expire_at&&A(a.value.expire_at)}finally{p.value=!1}}return q(()=>{m()}),(s,e)=>{const u=J,b=W;return l(),r("div",H,[F(p)?(l(),V(U,{key:0})):a.value?(l(),r("div",X,[e[12]||(e[12]=t("h1",{class:"text-2xl sm:text-3xl font-semibold text-gray-900 dark:text-gray-100"}," Order Details ",-1)),t("div",ee,[t("div",te,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Order ID",-1)),t("p",se,o(a.value.uuid),1)]),t("span",{class:M(["flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium",T(a.value.status)])},[P(u,{name:D(a.value.status),class:"w-4 h-4"},null,8,["name"]),w(" "+o(S(a.value.status)),1)],2)]),t("div",ae,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Quantity",-1)),t("p",oe,o(a.value.quantity),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Amount",-1)),t("p",ne,o(a.value.amount),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Created At",-1)),t("p",le,o(B(a.value.created_at)),1)])])]),a.value.status.toLowerCase()==="pending"&&a.value.transaction?(l(),r("div",re,[t("div",null,[e[8]||(e[8]=t("h2",{class:"font-semibold text-gray-800 dark:text-gray-100"},"Payment Pending",-1)),t("p",de,[e[7]||(e[7]=w(" Please complete payment within ")),t("span",ie,o(f.value),1)])]),t("button",{onClick:N,class:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700"}," Pay Now ")])):c("",!0),t("div",null,[e[9]||(e[9]=t("h2",{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100"},"Products",-1)),t("div",ue,[(l(!0),r(Q,null,Y(a.value.products,(n,h)=>(l(),r("div",{key:h,class:"flex items-center justify-between p-4 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700"},[t("div",ce,[t("img",{src:n.product.thumbnail,class:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-md border",alt:"Product thumbnail"},null,8,pe),t("div",ge,[P(b,{to:`/product/${n.product.url}`,class:"text-blue-600 dark:text-blue-400 hover:underline font-medium line-clamp-1"},{default:K(()=>[w(o(n.product.name),1)]),_:2},1032,["to"]),t("p",be,"SKU: "+o(n.product.sku),1),t("p",fe,"Price: "+o(n.product.price),1),t("p",ye,"Qty: "+o(n.quantity||1),1)])]),t("div",ve,[C.value?(l(),r("button",{key:0,onClick:I=>x("cancel",n),class:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs"}," Cancel ",8,xe)):c("",!0),$.value?(l(),r("button",{key:1,onClick:I=>x("return",n),class:"px-3 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs"}," Return ",8,me)):c("",!0),L.value?(l(),r("button",{key:2,onClick:I=>x("refund",n),class:"px-3 py-1 rounded bg-purple-600 text-white hover:bg-purple-700 text-xs"}," Refund ",8,he)):c("",!0)])]))),128))])]),t("div",_e,[C.value?(l(),r("button",{key:0,onClick:e[0]||(e[0]=n=>v("cancel")),class:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700"}," Cancel Order ")):c("",!0),$.value?(l(),r("button",{key:1,onClick:e[1]||(e[1]=n=>v("return")),class:"px-4 py-2 rounded-lg bg-yellow-500 text-white hover:bg-yellow-600"}," Return Order ")):c("",!0),L.value?(l(),r("button",{key:2,onClick:e[2]||(e[2]=n=>v("refund")),class:"px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700"}," Request Refund ")):c("",!0),t("button",{onClick:E,class:"px-4 py-2 rounded-lg bg-gray-800 text-white hover:bg-gray-900"}," Download Invoice ")]),t("div",we,[t("div",ke,[e[10]||(e[10]=t("h2",{class:"font-semibold mb-2 text-gray-800 dark:text-gray-100"},"Billing Address",-1)),t("p",null,o(a.value.address.billing.person_name),1),t("p",null,o(a.value.address.billing.address_1),1),t("p",null,o(a.value.address.billing.city)+" - "+o(a.value.address.billing.postal_code),1),t("p",null,o(a.value.address.billing.person_mobile),1)]),t("div",Ce,[e[11]||(e[11]=t("h2",{class:"font-semibold mb-2 text-gray-800 dark:text-gray-100"},"Shipping Address",-1)),t("p",null,o(a.value.address.shipping.person_name),1),t("p",null,o(a.value.address.shipping.address_1),1),t("p",null,o(a.value.address.shipping.city)+" - "+o(a.value.address.shipping.postal_code),1),t("p",null,o(a.value.address.shipping.person_mobile),1)])])])):c("",!0)])}}});export{Re as default};
