{"version":3,"file":"Cl4xhUaK.js","sources":["../../../../pages/dashboard/helpdesk/create.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-4 sm:p-6 max-w-3xl mx-auto space-y-8\">\r\n    <div class=\"flex items-center gap-3\">\r\n      <Icon name=\"mdi-plus-box\" class=\"text-blue-600 dark:text-blue-400 text-2xl\" />\r\n      <h1 class=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">\r\n        Create New Support Ticket\r\n      </h1>\r\n    </div>\r\n\r\n    <form\r\n        @submit.prevent=\"handleSubmit\"\r\n        class=\"space-y-6 bg-white dark:bg-gray-900 p-4 sm:p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\"\r\n    >\r\n      <!-- Title -->\r\n      <div>\r\n        <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n          Title\r\n        </label>\r\n        <input\r\n            v-model=\"form.title\"\r\n            type=\"text\"\r\n            required\r\n            placeholder=\"Brief summary of your issue\"\r\n            class=\"w-full border border-gray-300 dark:border-gray-700 rounded-md px-4 py-2\r\n                 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\r\n                 placeholder-gray-400 dark:placeholder-gray-500\r\n                 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        />\r\n      </div>\r\n\r\n      <!-- Description -->\r\n      <div>\r\n        <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n          Description\r\n        </label>\r\n        <textarea\r\n            v-model=\"form.description\"\r\n            rows=\"5\"\r\n            required\r\n            placeholder=\"Please describe your issue in detail...\"\r\n            class=\"w-full border border-gray-300 dark:border-gray-700 rounded-md px-4 py-2\r\n                 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\r\n                 placeholder-gray-400 dark:placeholder-gray-500\r\n                 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y\"\r\n        ></textarea>\r\n      </div>\r\n\r\n      <!-- Priority + Topic -->\r\n      <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n        <!-- Priority -->\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n            Priority\r\n          </label>\r\n          <select\r\n              v-model=\"form.priority\"\r\n              class=\"w-full border border-gray-300 dark:border-gray-700 rounded-md px-4 py-2\r\n                   bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\r\n                   focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            <option value=\"low\">Low</option>\r\n            <option value=\"medium\">Medium</option>\r\n            <option value=\"high\">High</option>\r\n            <option value=\"urgent\">Urgent</option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- Topic -->\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n            Topic\r\n          </label>\r\n          <select\r\n              v-model=\"form.topic_slug\"\r\n              class=\"w-full border border-gray-300 dark:border-gray-700 rounded-md px-4 py-2\r\n                   bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\r\n                   focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            <option disabled value=\"\">Select a topic</option>\r\n            <option\r\n                v-for=\"topic in topics\"\r\n                :key=\"topic.slug\"\r\n                :value=\"topic.slug\"\r\n            >\r\n              {{ topic.name }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Screenshot -->\r\n      <div>\r\n        <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n          Screenshot (optional)\r\n        </label>\r\n        <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            @change=\"handleFile\"\r\n            class=\"block w-full border border-gray-300 dark:border-gray-700 rounded-md px-4 py-2\r\n                 text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-800\r\n                 file:bg-gray-100 file:dark:bg-gray-700 file:border-0 file:px-4 file:py-2\"\r\n        />\r\n        <div\r\n            v-if=\"form.screenshot\"\r\n            class=\"mt-2 text-sm text-gray-600 dark:text-gray-400\"\r\n        >\r\n          Selected: {{ form.screenshot.name }}\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Submit -->\r\n      <div class=\"pt-2\">\r\n        <button\r\n            type=\"submit\"\r\n            class=\"w-full sm:w-auto px-6 py-2 bg-blue-600 text-white rounded-md\r\n                 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\r\n                 disabled:opacity-50\"\r\n            :disabled=\"!form.title || !form.description || !form.topic_slug\"\r\n        >\r\n          <Icon name=\"mdi-send\" class=\"inline-block mr-2 -mt-1\" />\r\n          Submit Ticket\r\n        </button>\r\n      </div>\r\n    </form>\r\n\r\n    <!-- FAQ -->\r\n    <div\r\n        class=\"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4 sm:p-6\"\r\n    >\r\n      <h2\r\n          class=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2\"\r\n      >\r\n        <Icon name=\"mdi-frequently-asked-questions\" class=\"text-xl text-blue-500\" />\r\n        Frequently Asked Questions\r\n      </h2>\r\n      <ul\r\n          class=\"space-y-2 text-sm text-gray-700 dark:text-gray-300 list-disc list-inside\"\r\n      >\r\n        <li>Check the Help Center for common issues.</li>\r\n        <li>Include browser info and relevant screenshots.</li>\r\n        <li>Use a clear title describing the problem.</li>\r\n      </ul>\r\n      <div class=\"mt-4\">\r\n        <NuxtLink to=\"/dashboard/faq\">\r\n          <button\r\n              class=\"text-sm px-4 py-2 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-md hover:bg-gray-300 dark:hover:bg-gray-700\"\r\n          >\r\n            <Icon name=\"mdi-book-open-page-variant\" class=\"inline-block mr-2 -mt-1\" />\r\n            Browse Help Center\r\n          </button>\r\n        </NuxtLink>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { useRuntimeConfig, useSanctumFetch, useToast } from '#imports'\r\n\r\ndefinePageMeta({ layout: 'dashboard' })\r\n\r\nconst router = useRouter()\r\nconst toast = useToast()\r\nconst config = useRuntimeConfig()\r\n\r\n\r\nconst form = reactive({\r\n  title: '',\r\n  description: '',\r\n  priority: 'medium',\r\n  screenshot: null as File | null,\r\n  topic_slug: ''\r\n})\r\n\r\nfunction handleFile(e: Event) {\r\n  const input = e.target as HTMLInputElement\r\n  form.screenshot = input.files?.[0] ?? null\r\n}\r\n\r\nconst topics = ref<any[]>([])\r\n\r\nasync function fetchTopics() {\r\n  try {\r\n    const res = await useSanctumFetch(`${config.public.apiBase}/helpdesk/topics/ticket`)\r\n    topics.value = res?.data ?? []\r\n  } catch (e) {\r\n    console.error('‚ùå Failed to load helpdesk topics', e)\r\n    topics.value = []\r\n  }\r\n}\r\n\r\n\r\n\r\nonMounted(async () => {\r\n  await fetchTopics()\r\n})\r\n\r\n\r\nasync function handleSubmit() {\r\n  try {\r\n    const fd = new FormData()\r\n    fd.append('title', form.title)\r\n    fd.append('description', form.description)\r\n    fd.append('priority', form.priority)\r\n\r\n    if (form.topic_slug) fd.append('topic_slug', form.topic_slug)\r\n    if (form.screenshot) fd.append('screenshot', form.screenshot)\r\n\r\n    const res = await useSanctumFetch(\r\n        `${config.public.apiBase}/helpdesk/tickets`,\r\n        {\r\n          method: 'POST',\r\n          body: fd,\r\n          credentials: 'include'\r\n        }\r\n    )\r\n\r\n    console.log('üì© Ticket submit response:', res)\r\n\r\n    if (res?.error) {\r\n      throw res.error\r\n    }\r\n\r\n    toast.success({\r\n      title: 'Success',\r\n      message: '‚úÖ Ticket submitted successfully!',\r\n      timeout: 3000\r\n    })\r\n\r\n    router.push('/dashboard/helpdesk')\r\n  } catch (e) {\r\n    console.error('‚ùå Ticket submit failed', e)\r\n    toast.error({\r\n      title: 'Error',\r\n      message: '‚ùå Ticket submit failed',\r\n      timeout: 3000\r\n    })\r\n  }\r\n}\r\n\r\n\r\n</script>\r\n"],"names":["router","useRouter","toast","useToast","config","useRuntimeConfig","form","reactive","handleFile","e","input","_a","topics","ref","fetchTopics","res","useSanctumFetch","onMounted","handleSubmit","fd","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_Icon","_cache","$event","_unref","_vModelText","_hoisted_3","_vModelSelect","_Fragment","_renderList","topic","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_8","_hoisted_9","_hoisted_10","_component_NuxtLink","_hoisted_11"],"mappings":"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"}