import{_ as F}from"./CzGapVpC.js";import{aX as E,by as L,bj as K,a_ as n,bt as R,aY as i,bg as X,b9 as q,b5 as t,b8 as V,bI as z,b4 as Y,bd as d,bp as W,aZ as S,bh as C,bk as h,bl as x,bu as _,be as Z,bf as G,b7 as M,bm as H,bx as J,bo as P,aW as Q,bw as T}from"./B132AJ_X.js";import{_ as ee}from"./DeG0kbPa.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};r.SENTRY_RELEASE={id:"3703708ef9ac1b45e23fc2a6a145a79341d4c60a"}}catch{}})();try{(function(){var r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new r.Error().stack;s&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[s]="2605501f-6a8f-4330-99e5-9cdc748f61e3",r._sentryDebugIdIdentifier="sentry-dbid-2605501f-6a8f-4330-99e5-9cdc748f61e3")})()}catch{}const te={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},ae={class:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-md w-full p-6"},se={class:"text-center space-y-2"},oe={class:"text-lg font-semibold text-gray-800 dark:text-white"},le={class:"text-sm text-gray-600 dark:text-gray-300"},re={__name:"AlertModal",props:{title:{type:String,default:"Alert"},message:{type:String,required:!0},modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(r,{emit:s}){const b=r,u=s,o=L(()=>b.modelValue),m=()=>u("update:modelValue",!1);return(p,v)=>(n(),K(z,{name:"fade"},{default:R(()=>[q(o)?(n(),i("div",te,[t("div",ae,[t("div",se,[t("h2",oe,V(r.title),1),t("p",le,V(r.message),1),t("button",{onClick:m,class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"}," OK ")])])])):X("",!0)]),_:1}))}},ne=E(re,[["__scopeId","data-v-c5cebc02"]]),de={class:"relative h-screen w-full bg-gray-100 dark:bg-gray-900 overflow-hidden"},ie={class:"relative z-10 flex items-center justify-center h-full px-4 max-w-full"},ue={class:"w-full max-w-md bg-white dark:bg-gray-800 shadow-xl rounded-lg p-6 md:p-8"},ce={class:"flex justify-center gap-6 text-sm mb-6"},be=["for"],me=["type","id","placeholder"],fe={class:"flex gap-2 justify-between"},pe=["onUpdate:modelValue","onInput","onKeydown"],ge={class:"relative"},ve=["type"],ye={key:0},we={key:1},xe={class:"relative"},ke=["type"],he={key:0},_e={key:1},Pe={class:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400"},Te=Y({__name:"forgot-password",setup(r){const s=d("mobile"),b=d(1),u=d(["","","","","",""]),o=d({mobile:"",email:"",password:"",confirmPassword:""}),m=d(!1),p=d(!1),v=d(!1),O=d(""),I=d(""),B=W(),k=Q(),y=d([]);function $(a){s.value=a,u.value=["","","","","",""],o.value.password="",o.value.confirmPassword="",b.value=1}function c(a,e){O.value=a,I.value=e,v.value=!0}async function j(){const a=o.value[s.value].trim();if(!a){c("Invalid Input","Please enter a valid contact.");return}try{await P(`${k.public.apiBase}/auth/send-otp`,{method:"POST",body:{type:s.value,value:a}}),b.value=2,T(()=>{var e;return(e=y.value[0])==null?void 0:e.focus()})}catch{c("Error","Failed to send OTP.")}}function N(a){u.value[a].length===1&&a<5&&T(()=>{var e;return(e=y.value[a+1])==null?void 0:e.focus()})}function D(a){u.value[a]===""&&a>0&&T(()=>{var e;return(e=y.value[a-1])==null?void 0:e.focus()})}async function U(){var e;const a=u.value.join("");if(a.length!==6){c("Invalid OTP","Please enter the 6-digit OTP.");return}try{(e=(await P(`${k.public.apiBase}/auth/verify-otp`,{method:"POST",body:{type:s.value,value:o.value[s.value].trim(),otp:a}})).data)!=null&&e.valid?b.value=3:c("Verification Failed","Invalid OTP, please try again.")}catch{c("Verification Failed","OTP verification failed.")}}async function A(){const a=o.value.password.trim(),e=o.value.confirmPassword.trim(),w=o.value[s.value].trim(),l=u.value.join("");if(a.length<6){c("Weak Password","Password must be at least 6 characters.");return}if(a!==e){c("Mismatch","Passwords do not match.");return}try{await P(`${k.public.apiBase}/reset_password`,{method:"POST",body:{type:s.value,value:w,otp:l,password:a,password_confirmation:e}}),c("Success","Password reset successfully. Redirecting to login..."),setTimeout(()=>B.push("/auth/login"),1500)}catch{c("Error","Password reset failed.")}}return(a,e)=>{const w=F;return n(),i("div",de,[e[17]||(e[17]=t("div",{class:"absolute inset-0 bg-cover bg-center",style:{"background-image":"url('/images/bg-login.jpeg')"}},null,-1)),e[18]||(e[18]=t("div",{class:"absolute inset-0 bg-black bg-opacity-50 dark:bg-opacity-60 backdrop-blur-sm"},null,-1)),t("div",ie,[t("div",ue,[e[16]||(e[16]=t("div",{class:"flex flex-col items-center mb-6"},[t("img",{src:ee,alt:"Logo",class:"h-12 w-auto mb-2"}),t("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Reset Your Password"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Recover access using mobile or email")],-1)),t("div",ce,[t("button",{class:C(s.value==="mobile"?a.activeTab:a.inactiveTab),onClick:e[0]||(e[0]=l=>$("mobile"))},"Mobile",2),t("button",{class:C(s.value==="email"?a.activeTab:a.inactiveTab),onClick:e[1]||(e[1]=l=>$("email"))},"Email",2)]),b.value===1?(n(),i("form",{key:0,onSubmit:h(j,["prevent"]),class:"space-y-5"},[t("div",null,[t("label",{for:s.value,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},V(s.value==="mobile"?"Mobile Number":"Email Address"),9,be),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.value[s.value]=l),type:s.value==="mobile"?"tel":"email",id:s.value,required:"",placeholder:s.value==="mobile"?"+8801XXXXXXXXX":"you@example.com",class:"mt-1 w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"},null,8,me),[[_,o.value[s.value]]])]),e[8]||(e[8]=t("button",{type:"submit",class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-200 shadow"}," Send OTP ",-1))],32)):b.value===2?(n(),i("form",{key:1,onSubmit:h(U,["prevent"]),class:"space-y-5"},[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Enter 6-digit OTP",-1)),t("div",fe,[(n(),i(Z,null,G(6,(l,f)=>x(t("input",{key:f,"onUpdate:modelValue":g=>u.value[f]=g,maxlength:"1",ref_for:!0,ref:g=>y.value[f]=g,onInput:g=>N(f),onKeydown:J(g=>D(f),["backspace"]),class:"w-10 h-10 text-center border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"},null,40,pe),[[H,u.value[f]]])),64))])]),e[10]||(e[10]=t("button",{type:"submit",class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-200 shadow"}," Verify OTP ",-1))],32)):b.value===3?(n(),i("form",{key:2,onSubmit:h(A,["prevent"]),class:"space-y-5"},[t("div",null,[e[11]||(e[11]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"New Password",-1)),t("div",ge,[x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.password=l),type:m.value?"text":"password",id:"password",class:"mt-1 w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white pr-10 focus:ring-2 focus:ring-blue-500"},null,8,ve),[[_,o.value.password]]),t("button",{type:"button",onClick:e[4]||(e[4]=l=>m.value=!m.value),class:"absolute right-3 top-2 text-gray-500 dark:text-gray-400"},[m.value?(n(),i("span",ye,"ðŸ™ˆ")):(n(),i("span",we,"ðŸ‘ï¸"))])])]),t("div",null,[e[12]||(e[12]=t("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Confirm Password",-1)),t("div",xe,[x(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.confirmPassword=l),type:p.value?"text":"password",id:"confirmPassword",class:"mt-1 w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white pr-10 focus:ring-2 focus:ring-blue-500"},null,8,ke),[[_,o.value.confirmPassword]]),t("button",{type:"button",onClick:e[6]||(e[6]=l=>p.value=!p.value),class:"absolute right-3 top-2 text-gray-500 dark:text-gray-400"},[p.value?(n(),i("span",he,"ðŸ™ˆ")):(n(),i("span",_e,"ðŸ‘ï¸"))])])]),e[13]||(e[13]=t("button",{type:"submit",class:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200 shadow"}," Reset Password ",-1))],32)):X("",!0),t("div",Pe,[e[15]||(e[15]=M(" Remembered your password? ")),S(w,{to:"/auth/login",class:"text-blue-600 hover:underline dark:text-blue-400"},{default:R(()=>e[14]||(e[14]=[M("Login")])),_:1,__:[14]})])])]),S(ne,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=l=>v.value=l),title:O.value,message:I.value},null,8,["modelValue","title","message"])])}}}),$e=E(Te,[["__scopeId","data-v-d3fc126b"]]);export{$e as default};
