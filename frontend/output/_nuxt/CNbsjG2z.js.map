{"version":3,"file":"CNbsjG2z.js","sources":["../../../../pages/career/[url]/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"max-w-4xl mx-auto px-4 py-16 text-gray-800 dark:text-gray-200\">\r\n    <!-- Loader (before data loaded) -->\r\n    <div v-if=\"!loaded\" class=\"text-center py-24\">\r\n      <div class=\"h-12 w-12 mx-auto animate-spin rounded-full border-4 border-blue-500 border-t-transparent dark:border-blue-400 dark:border-t-transparent\"></div>\r\n    </div>\r\n\r\n    <!-- Job Found -->\r\n    <div v-else-if=\"job\" class=\"space-y-10\">\r\n      <!-- Header -->\r\n      <div class=\"text-center space-y-2\">\r\n        <h1 class=\"text-4xl font-bold\">{{ job.name }}</h1>\r\n        <p class=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          üìç {{ job.location }} &nbsp; | &nbsp; üß© {{ job.role }} &nbsp; | &nbsp; üïí {{ job.type }}\r\n        </p>\r\n      </div>\r\n\r\n      <!-- Meta Info -->\r\n      <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700 dark:text-gray-300\">\r\n        <p><strong>Open Date:</strong> {{ job.open_date }}</p>\r\n        <p><strong>Close Date:</strong> {{ job.close_date }}</p>\r\n        <p><strong>Vacancies:</strong> {{ job.vacancy }}</p>\r\n        <p v-if=\"job.is_payable\"><strong>Fees:</strong> ‚Çπ{{ job.fees }}</p>\r\n      </div>\r\n\r\n      <!-- Job Thumbnail -->\r\n      <div>\r\n        <img\r\n          :src=\"job.thumbnail\"\r\n          :alt=\"job.name\"\r\n          class=\"w-full h-64 object-cover rounded-xl shadow\"\r\n        />\r\n      </div>\r\n\r\n      <!-- Description -->\r\n      <div class=\"space-y-4 text-base leading-relaxed\">\r\n        <div\r\n          v-for=\"(para, index) in parsedDescription\"\r\n          :key=\"index\"\r\n          class=\"whitespace-pre-line\"\r\n        >\r\n          {{ para }}\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Action Buttons -->\r\n      <div class=\"text-center flex flex-col sm:flex-row justify-center gap-4\">\r\n        <!-- Apply Now -->\r\n        <NuxtLink\r\n          :to=\"`/career/${job.url}/apply`\"\r\n          class=\"bg-blue-600 text-white px-6 py-3 rounded text-lg hover:bg-blue-700 inline-flex items-center gap-2 justify-center\"\r\n        >\r\n          <Icon name=\"mdi:send\" /> Apply Now\r\n        </NuxtLink>\r\n\r\n        <!-- Download ZIP -->\r\n        <a\r\n          v-if=\"isZip\"\r\n          :href=\"pdfList[0]\"\r\n          target=\"_blank\"\r\n          rel=\"noopener\"\r\n          class=\"bg-gray-100 dark:bg-gray-800 text-blue-600 border border-blue-600 px-6 py-3 rounded text-lg hover:bg-blue-50 dark:hover:bg-gray-700 inline-flex items-center gap-2 justify-center\"\r\n        >\r\n          <Icon name=\"mdi:archive\" /> Download ZIP\r\n        </a>\r\n      </div>\r\n\r\n      <!-- PDF Previews -->\r\n      <div v-if=\"!isZip && pdfList.length\" class=\"grid sm:grid-cols-2 gap-4 mt-8\">\r\n        <div\r\n          v-for=\"(pdfUrl, index) in pdfList\"\r\n          :key=\"index\"\r\n          class=\"border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden shadow-sm bg-white dark:bg-gray-900\"\r\n        >\r\n          <div class=\"relative h-48 bg-gray-100 dark:bg-gray-800 flex items-center justify-center\">\r\n            <Icon name=\"mdi:file-pdf-box\" class=\"text-red-500 text-6xl\" />\r\n          </div>\r\n          <div class=\"p-4 flex justify-between items-center\">\r\n            <p class=\"text-sm truncate text-gray-700 dark:text-gray-300\">\r\n              {{ getPdfName(pdfUrl, index) }}\r\n            </p>\r\n\r\n            <a\r\n  :href=\"pdfUrl\"\r\n  target=\"_blank\"\r\n  rel=\"noopener\"\r\n  class=\"text-blue-600 hover:underline text-sm flex items-center gap-1 transition-all duration-200 hover:translate-x-1 hover:text-blue-700\"\r\n>\r\n  <Icon name=\"mdi:file-download\" class=\"text-base transition-transform duration-200\" />\r\n  Download\r\n</a>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Not Found -->\r\n    <div v-else class=\"text-center py-24\">\r\n      <h2 class=\"text-2xl font-semibold mb-2\">Job not found</h2>\r\n      <NuxtLink to=\"/career\" class=\"text-blue-600 hover:underline\">‚Üê Back to Careers</NuxtLink>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { useSanctumFetch, useRuntimeConfig } from '#imports'\r\n\r\n// Global loading animation\r\nconst loading = useState('pageLoading', () => false)\r\nloading.value = true\r\n\r\nconst job = ref<Job | null>(null)\r\nconst loaded = ref(false) // ‚úÖ New flag to control display after fetch\r\n\r\nconst route = useRoute()\r\nconst config = useRuntimeConfig()\r\n\r\n// Type definition\r\ninterface Job {\r\n  name: string\r\n  url: string\r\n  role: string\r\n  type: string\r\n  location: string\r\n  thumbnail: string\r\n  pdf?: string | string[]\r\n  description: string\r\n  vacancy: number\r\n  open_date: string\r\n  close_date: string\r\n  is_payable: boolean\r\n  fees?: string\r\n}\r\n\r\n// Description parsing\r\nconst parsedDescription = computed(() =>\r\n  job.value?.description?.trim().split(/\\n{2,}/) || []\r\n)\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const apiUrl = `${config.public.apiBase}/recruitment/${route.params.url}`\r\n    const response = await useSanctumFetch(apiUrl)\r\n    job.value = response?.data || null\r\n  } catch (error) {\r\n    console.error('Error fetching job:', error)\r\n    job.value = null\r\n  } finally {\r\n    loaded.value = true        // ‚úÖ Mark fetch complete\r\n    loading.value = false      // ‚úÖ Stop global loading\r\n  }\r\n})\r\n\r\nconst pdfList = computed(() => {\r\n  if (!job.value?.pdf) return []\r\n  if (Array.isArray(job.value.pdf)) return job.value.pdf\r\n  if (typeof job.value.pdf === 'string') return [job.value.pdf]\r\n  return []\r\n})\r\n\r\nconst isZip = computed(() => {\r\n  return pdfList.value.length === 1 && pdfList.value[0].endsWith('.zip')\r\n})\r\n\r\n\r\nconst getPdfName = (url: string, index: number): string => {\r\n  try {\r\n    const decodedUrl = decodeURIComponent(url)\r\n    const parts = decodedUrl.split('/').pop()?.split('#')[0].split('?')[0]\r\n    const name = parts?.replace(/\\.pdf$/i, '')?.trim()\r\n    return name || `Document ${index + 1}`\r\n  } catch {\r\n    return `Document ${index + 1}`\r\n  }\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n/* Optional styles can go here */\r\n</style>\r\n"],"names":["loading","useState","job","ref","loaded","route","useRoute","config","useRuntimeConfig","parsedDescription","computed","_b","_a","onMounted","apiUrl","response","useSanctumFetch","error","pdfList","isZip","getPdfName","url","index","parts","_openBlock","_createElementBlock","_hoisted_1","_hoisted_3","_createElementVNode","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","_cache","_hoisted_8","_hoisted_10","_Fragment","_renderList","para","_hoisted_11","_createVNode","_component_NuxtLink","_component_Icon","_hoisted_13","pdfUrl","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_18","_hoisted_2"],"mappings":"ykDA+GA,MAAMA,EAAUC,EAAS,cAAe,IAAM,EAAK,EACnDD,EAAQ,MAAQ,GAEhB,MAAME,EAAMC,EAAgB,IAAI,EAC1BC,EAASD,EAAI,EAAK,EAElBE,EAAQC,EAAA,EACRC,EAASC,EAAA,EAoBTC,EAAoBC,EAAS,IAAA,SACjC,QAAAC,GAAAC,EAAAV,EAAI,QAAJ,YAAAU,EAAW,cAAX,YAAAD,EAAwB,OAAO,MAAM,YAAa,CAAA,EAAC,EAGrDE,EAAU,SAAY,CACpB,GAAI,CACF,MAAMC,EAAS,GAAGP,EAAO,OAAO,OAAO,gBAAgBF,EAAM,OAAO,GAAG,GACjEU,EAAW,MAAMC,EAAgBF,CAAM,EAC7CZ,EAAI,OAAQa,GAAA,YAAAA,EAAU,OAAQ,IAChC,OAASE,EAAO,CACd,QAAQ,MAAM,sBAAuBA,CAAK,EAC1Cf,EAAI,MAAQ,IACd,QAAA,CACEE,EAAO,MAAQ,GACfJ,EAAQ,MAAQ,EAClB,CACF,CAAC,EAED,MAAMkB,EAAUR,EAAS,IAAM,OAC7B,OAAKE,EAAAV,EAAI,QAAJ,MAAAU,EAAW,IACZ,MAAM,QAAQV,EAAI,MAAM,GAAG,EAAUA,EAAI,MAAM,IAC/C,OAAOA,EAAI,MAAM,KAAQ,SAAiB,CAACA,EAAI,MAAM,GAAG,EACrD,CAAA,EAHqB,CAAA,CAI9B,CAAC,EAEKiB,EAAQT,EAAS,IACdQ,EAAQ,MAAM,SAAW,GAAKA,EAAQ,MAAM,CAAC,EAAE,SAAS,MAAM,CACtE,EAGKE,EAAa,CAACC,EAAaC,IAA0B,SACzD,GAAI,CAEF,MAAMC,GAAQX,EADK,mBAAmBS,CAAG,EAChB,MAAM,GAAG,EAAE,IAAA,IAAtB,YAAAT,EAA6B,MAAM,KAAK,GAAG,MAAM,KAAK,GAEpE,QADaD,EAAAY,GAAA,YAAAA,EAAO,QAAQ,UAAW,MAA1B,YAAAZ,EAA+B,SAC7B,YAAYW,EAAQ,CAAC,EACtC,MAAQ,CACN,MAAO,YAAYA,EAAQ,CAAC,EAC9B,CACF,8BAhLE,OAAAE,EAAA,EAAAC,EAqGM,MArGNC,EAqGM,CAnGQtB,EAAA,MAKIF,EAAA,OAAhBsB,IAAAC,EAuFM,MAvFNE,EAuFM,CArFJC,EAKM,MALNC,EAKM,CAJJD,EAAkD,KAAlDE,EAAkDC,EAAhB7B,EAAA,MAAI,IAAI,EAAA,CAAA,EAC1C0B,EAEI,IAFJI,EAAoD,OAC/CD,EAAG7B,EAAA,MAAI,QAAQ,EAAG,aAAoB6B,EAAG7B,EAAA,MAAI,IAAI,EAAG,aAAoB6B,EAAG7B,EAAA,MAAI,IAAI,EAAA,CAAA,CAAA,GAK1F0B,EAKM,MALNK,EAKM,CAJJL,EAAsD,IAAA,KAAA,CAAnDM,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,EAA2B,cAAnB,aAAU,EAAA,KAAS,IAACG,EAAG7B,EAAA,MAAI,SAAS,EAAA,CAAA,CAAA,GAC/C0B,EAAwD,IAAA,KAAA,CAArDM,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,EAA4B,cAApB,cAAW,EAAA,KAAS,IAACG,EAAG7B,EAAA,MAAI,UAAU,EAAA,CAAA,CAAA,GACjD0B,EAAoD,IAAA,KAAA,CAAjDM,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,EAA2B,cAAnB,aAAU,EAAA,KAAS,IAACG,EAAG7B,EAAA,MAAI,OAAO,EAAA,CAAA,CAAA,GACpCA,EAAA,MAAI,gBAAbuB,EAAmE,IAAAU,EAAA,CAA1CD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,EAAsB,cAAd,QAAK,EAAA,KAAS,KAAEG,EAAG7B,EAAA,MAAI,IAAI,EAAA,CAAA,CAAA,eAI9D0B,EAMM,MAAA,KAAA,CALJA,EAIE,MAAA,CAHC,IAAK1B,EAAA,MAAI,UACT,IAAKA,EAAA,MAAI,KACV,MAAM,4CAAA,cAKV0B,EAQM,MARNQ,EAQM,EAPJZ,EAAA,EAAA,EAAAC,EAMMY,EAAA,KAAAC,EALoB7B,EAAA,MAAiB,CAAjC8B,EAAMjB,SADhBG,EAMM,MAAA,CAJH,IAAKH,EACN,MAAM,qBAAA,IAEHiB,CAAI,EAAA,CAAA,YAKXX,EAmBM,MAnBNY,EAmBM,CAjBJC,EAKWC,EAAA,CAJR,GAAE,WAAaxC,EAAA,MAAI,GAAG,SACvB,MAAM,kHAAA,aAEN,IAAwB,CAAxBuC,EAAwBE,EAAA,CAAlB,KAAK,WAAU,gBAAG,aAC1B,EAAA,yBAIQxB,EAAA,WADRM,EAQI,IAAA,OAND,KAAMP,EAAA,MAAO,CAAA,EACd,OAAO,SACP,IAAI,WACJ,MAAM,mLAAA,GAENuB,EAA2BE,EAAA,CAArB,KAAK,cAAa,gBAAG,gBAC7B,EAAA,oBAIUxB,EAAA,OAASD,EAAA,MAAQ,QAA7BM,IAAAC,EA0BM,MA1BNmB,EA0BM,EAzBJpB,EAAA,EAAA,EAAAC,EAwBMY,EAAA,KAAAC,EAvBsBpB,EAAA,MAAO,CAAzB2B,EAAQvB,SADlBG,EAwBM,MAAA,CAtBH,IAAKH,EACN,MAAM,4GAAA,GAENM,EAEM,MAFNkB,EAEM,CADJL,EAA8DE,EAAA,CAAxD,KAAK,mBAAmB,MAAM,uBAAA,KAEtCf,EAeM,MAfNmB,EAeM,CAdJnB,EAEI,IAFJoB,EAEIjB,EADCX,EAAWyB,EAAQvB,CAAK,CAAA,EAAA,CAAA,EAG7BM,EAQR,IAAA,CAPD,KAAMiB,EACP,OAAO,SACP,IAAI,WACJ,MAAM,mIAAA,GAENJ,EAAqFE,EAAA,CAA/E,KAAK,oBAAoB,MAAM,6CAAA,iBAAgD,YAEvF,EAAA,mCAQInB,EAAA,EAAAC,EAGM,MAHNwB,GAGM,CAFJf,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,EAA0D,KAAA,CAAtD,MAAM,6BAAA,EAA8B,gBAAa,EAAA,GACrDa,EAAyFC,EAAA,CAA/E,GAAG,UAAU,MAAM,+BAAA,aAAgC,IAAiBR,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAjB,mBAAiB,CAAA,qBAjGhFV,EAAA,EAAAC,EAEM,MAFNyB,EAEMhB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CADJN,EAA4J,MAAA,CAAvJ,MAAM,0IAAA,EAA0I,KAAA,EAAA,CAAA"}