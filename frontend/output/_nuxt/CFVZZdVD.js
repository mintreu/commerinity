import{b4 as H,bd as s,bC as J,bi as K,ba as Q,aY as n,bj as X,bg as w,b9 as ee,b5 as t,b8 as r,aZ as I,b7 as N,bl as d,bB as A,be as j,bf as L,bm as b,bo as y,aW as te,a_ as l,bc as ae,bh as O,bE as se}from"./B132AJ_X.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};i.SENTRY_RELEASE={id:"3703708ef9ac1b45e23fc2a6a145a79341d4c60a"}}catch{}})();try{(function(){var i=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},u=new i.Error().stack;u&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[u]="2632074a-5e1b-4bab-a0ed-3c0a5a4ff1ec",i._sentryDebugIdIdentifier="sentry-dbid-2632074a-5e1b-4bab-a0ed-3c0a5a4ff1ec")})()}catch{}const le={class:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 p-4 sm:p-6"},oe={key:1,class:"flex items-center justify-center min-h-screen"},ne={class:"max-w-sm w-full bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center"},re=["disabled"],de={key:2,class:"space-y-6"},ie={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 flex flex-col sm:flex-row sm:items-center sm:justify-between"},ue={class:"text-sm text-gray-500"},pe={class:"text-3xl font-extrabold mt-2"},ce={class:"mt-4 sm:mt-0 flex flex-wrap gap-2"},ge={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},be={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 gap-2"},ye={class:"flex flex-wrap gap-2"},fe={class:"hidden sm:block overflow-x-auto"},me={class:"w-full text-sm"},ve={class:"py-2 px-3 capitalize"},xe={class:"py-2 px-3"},we={class:"py-2 px-3"},ke={class:"py-2 px-3"},he={class:"py-2 px-3 text-center"},Ce=["onClick"],_e={class:"sm:hidden space-y-3"},$e={class:"flex justify-between items-center"},Se={class:"capitalize font-medium"},Pe={class:"text-sm text-gray-500"},Te={class:"text-xs text-gray-400"},Me=["onClick"],Ee={key:0,class:"mt-4 text-center"},Ue={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},Ie={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full relative"},Ne={class:"text-xs bg-gray-100 dark:bg-gray-900 p-3 rounded max-h-64 overflow-auto"},Ve={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},De={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-sm w-full relative"},Fe={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},Be={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-sm w-full relative"},We={key:6,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},Ae={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-sm w-full relative"},je={key:7,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},Le={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-sm w-full relative"},Re=H({__name:"index",setup(i){const u=s(null),C=s([]),V=s(!0),_=s(!1),D=s(1),$=s(!0),f=s({type:"all",status:"all"}),F=s("desc"),S=s(!1),B=s(null),P=s(!1),p=s({pin:"",confirmPin:""}),T=s(!1),M=s({amount:""}),E=s(!1),m=s({amount:"",bank_account:""}),U=s(!1),v=s({amount:"",recipient_uuid:""}),g=te(),W=J("pageLoading",()=>!1),o=K();async function k(){try{V.value=!0;const c=await y(`${g.public.apiBase}/wallet`);if(!(c!=null&&c.data))return;u.value=c.data??null}catch{o.error({title:"Error!",message:"Failed to fetch wallet."})}finally{V.value=!1}}async function h(c=!1){try{if(c&&(C.value=[],D.value=1,$.value=!0),!$.value)return;const e=await y(`${g.public.apiBase}/transactions?page=${D.value}&type=${f.value.type}&status=${f.value.status}&sort=${F.value}`);if(!(e!=null&&e.data))return;const x=e.data.data??[];C.value.push(...x),$.value=!!e.data.next_page_url,D.value++}catch{o.error({title:"Error!",message:"Failed to fetch transactions."})}}async function R(){try{_.value=!0,await y(`${g.public.apiBase}/wallet/create`,{method:"POST"}),await k(),o.success({title:"Success!",message:"Wallet unlocked successfully!"})}catch{o.error({title:"Error!",message:"Failed to create wallet."})}finally{_.value=!1}}async function z(){if(p.value.pin!==p.value.confirmPin){o.error({title:"Error!",message:"PINs do not match."});return}try{await y(`${g.public.apiBase}/wallet/change-pin`,{method:"POST",body:p.value}),o.success({title:"Success!",message:"PIN changed successfully."}),P.value=!1,p.value={pin:"",confirmPin:""}}catch{o.error({title:"Error!",message:"Failed to change PIN."})}}async function Y(){try{await y(`${g.public.apiBase}/wallet/add-money`,{method:"POST",body:M.value}),o.success({title:"Success!",message:"Money added successfully."}),await k(),T.value=!1,M.value={amount:""}}catch{o.error({title:"Error!",message:"Failed to add money."})}}async function Z(){try{await y(`${g.public.apiBase}/wallet/withdraw`,{method:"POST",body:m.value}),o.success({title:"Success!",message:"Withdrawal successful."}),await k(),E.value=!1,m.value={amount:"",bank_account:""}}catch{o.error({title:"Error!",message:"Failed to withdraw money."})}}async function q(){try{await y(`${g.public.apiBase}/wallet/send`,{method:"POST",body:v.value}),o.success({title:"Success!",message:"Money sent successfully."}),await k(),U.value=!1,v.value={amount:"",recipient_uuid:""}}catch{o.error({title:"Error!",message:"Failed to send money."})}}return Q(async()=>{W.value=!0,await k(),await h(!0),W.value=!1}),(c,e)=>{const x=ae;return l(),n("div",le,[ee(W)||V.value?(l(),X(se,{key:0})):u.value?(l(),n("div",de,[t("div",ie,[t("div",null,[e[25]||(e[25]=t("h2",{class:"text-lg font-bold"},"My Wallet",-1)),t("p",ue,"UUID: "+r(u.value.uuid),1),t("p",pe,r(u.value.balance),1)]),t("div",ce,[t("button",{onClick:e[0]||(e[0]=a=>T.value=!0),class:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700"},[I(x,{name:"mdi:wallet-plus"}),e[26]||(e[26]=N(" Add Money "))]),t("button",{onClick:e[1]||(e[1]=a=>E.value=!0),class:"flex items-center gap-1 px-3 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700"},[I(x,{name:"mdi:bank-transfer"}),e[27]||(e[27]=N(" Withdraw "))]),t("button",{onClick:e[2]||(e[2]=a=>U.value=!0),class:"flex items-center gap-1 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},[I(x,{name:"mdi:send"}),e[28]||(e[28]=N(" Send "))]),t("button",{onClick:e[3]||(e[3]=a=>P.value=!0),class:"flex items-center gap-1 px-3 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"},[I(x,{name:"mdi:key-change"}),e[29]||(e[29]=N(" Change PIN "))])])]),t("div",ge,[t("div",be,[e[33]||(e[33]=t("h3",{class:"text-lg font-semibold"},"Transactions",-1)),t("div",ye,[d(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>f.value.type=a),onChange:e[5]||(e[5]=a=>h(!0)),class:"px-2 py-1 border rounded text-sm bg-white dark:bg-gray-700 dark:text-gray-100"},e[30]||(e[30]=[t("option",{value:"all"},"All Types",-1),t("option",{value:"credit"},"Credit",-1),t("option",{value:"debit"},"Debit",-1)]),544),[[A,f.value.type]]),d(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>f.value.status=a),onChange:e[7]||(e[7]=a=>h(!0)),class:"px-2 py-1 border rounded text-sm bg-white dark:bg-gray-700 dark:text-gray-100"},e[31]||(e[31]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"success"},"Success",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"failed"},"Failed",-1)]),544),[[A,f.value.status]]),d(t("select",{"onUpdate:modelValue":e[8]||(e[8]=a=>F.value=a),onChange:e[9]||(e[9]=a=>h(!0)),class:"px-2 py-1 border rounded text-sm bg-white dark:bg-gray-700 dark:text-gray-100"},e[32]||(e[32]=[t("option",{value:"desc"},"Newest",-1),t("option",{value:"asc"},"Oldest",-1)]),544),[[A,F.value]])])]),t("div",fe,[t("table",me,[e[34]||(e[34]=t("thead",null,[t("tr",{class:"border-b dark:border-gray-700"},[t("th",{class:"text-left py-2 px-3"},"Type"),t("th",{class:"text-left py-2 px-3"},"Purpose"),t("th",{class:"text-left py-2 px-3"},"Amount"),t("th",{class:"text-left py-2 px-3"},"Status"),t("th",{class:"text-left py-2 px-3"},"Date"),t("th",{class:"py-2 px-3"},"Action")])],-1)),t("tbody",null,[(l(!0),n(j,null,L(C.value,a=>(l(),n("tr",{key:a.uuid,class:"border-b dark:border-gray-700"},[t("td",ve,r(a.type),1),t("td",xe,r(a.purpose??"N/A"),1),t("td",{class:O(["py-2 px-3 font-bold",a.type==="credit"?"text-green-600":"text-red-600"])},r(a.amount),3),t("td",we,r(a.status),1),t("td",ke,r(new Date(a.created_at).toLocaleString()),1),t("td",he,[t("button",{onClick:G=>{B.value=a,S.value=!0},class:"text-indigo-600 hover:underline"},"View",8,Ce)])]))),128))])])]),t("div",_e,[(l(!0),n(j,null,L(C.value,a=>(l(),n("div",{key:a.uuid,class:"p-3 border rounded dark:border-gray-700"},[t("div",$e,[t("p",Se,r(a.type),1),t("p",{class:O(["font-bold",a.type==="credit"?"text-green-600":"text-red-600"])},r(a.amount),3)]),t("p",Pe,r(a.purpose??"N/A"),1),t("p",Te,r(new Date(a.created_at).toLocaleString()),1),t("button",{onClick:G=>{B.value=a,S.value=!0},class:"mt-2 text-xs text-indigo-600"},"View Details",8,Me)]))),128))]),$.value?(l(),n("div",Ee,[t("button",{onClick:e[10]||(e[10]=a=>h()),class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded"},"Load More")])):w("",!0)])])):(l(),n("div",oe,[t("div",ne,[e[23]||(e[23]=t("h2",{class:"text-xl font-bold mb-2"},"Wallet Locked ðŸ”’",-1)),e[24]||(e[24]=t("p",{class:"mb-4 text-gray-600 dark:text-gray-400"},"Unlock to create your wallet.",-1)),t("button",{onClick:R,disabled:_.value,class:"w-full px-4 py-2 bg-indigo-600 text-white rounded font-medium hover:bg-indigo-700 disabled:opacity-50"},r(_.value?"Creating...":"Unlock Wallet"),9,re)])])),S.value?(l(),n("div",Ue,[t("div",Ie,[t("button",{onClick:e[11]||(e[11]=a=>S.value=!1),class:"absolute top-2 right-2 text-gray-400 hover:text-gray-600"},"âœ•"),e[35]||(e[35]=t("h3",{class:"text-lg font-bold mb-4"},"Transaction Details",-1)),t("pre",Ne,r(B.value),1)])])):w("",!0),P.value?(l(),n("div",Ve,[t("div",De,[t("button",{onClick:e[12]||(e[12]=a=>P.value=!1),class:"absolute top-2 right-2 text-gray-400 hover:text-gray-600"},"âœ•"),e[36]||(e[36]=t("h3",{class:"text-lg font-bold mb-4"},"Change PIN",-1)),d(t("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>p.value.pin=a),type:"password",placeholder:"Enter new PIN",class:"w-full px-3 py-2 border rounded mb-3 bg-white dark:bg-gray-700 dark:text-gray-100"},null,512),[[b,p.value.pin]]),d(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>p.value.confirmPin=a),type:"password",placeholder:"Confirm new PIN",class:"w-full px-3 py-2 border rounded mb-3 bg-white dark:bg-gray-700 dark:text-gray-100"},null,512),[[b,p.value.confirmPin]]),t("button",{onClick:z,class:"w-full bg-indigo-600 text-white px-4 py-2 rounded"},"Update PIN")])])):w("",!0),T.value?(l(),n("div",Fe,[t("div",Be,[t("button",{onClick:e[15]||(e[15]=a=>T.value=!1),class:"absolute top-2 right-2 text-gray-400 hover:text-gray-600"},"âœ•"),e[37]||(e[37]=t("h3",{class:"text-lg font-bold mb-4"},"Add Money",-1)),d(t("input",{"onUpdate:modelValue":e[16]||(e[16]=a=>M.value.amount=a),type:"number",placeholder:"Enter amount",class:"w-full px-3 py-2 border rounded mb-3 bg-white dark:bg-gray-700 dark:text-gray-100"},null,512),[[b,M.value.amount]]),t("button",{onClick:Y,class:"w-full bg-green-600 text-white px-4 py-2 rounded"},"Add")])])):w("",!0),E.value?(l(),n("div",We,[t("div",Ae,[t("button",{onClick:e[17]||(e[17]=a=>E.value=!1),class:"absolute top-2 right-2 text-gray-400 hover:text-gray-600"},"âœ•"),e[38]||(e[38]=t("h3",{class:"text-lg font-bold mb-4"},"Withdraw Money",-1)),d(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>m.value.amount=a),type:"number",placeholder:"Enter amount",class:"w-full px-3 py-2 border rounded mb-3 bg-white dark:bg-gray-700 dark:text-gray-100"},null,512),[[b,m.value.amount]]),d(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>m.value.bank_account=a),type:"text",placeholder:"Bank account number",class:"w-full px-3 py-2 border rounded mb-3 bg-white dark:bg-gray-700 dark:text-gray-100"},null,512),[[b,m.value.bank_account]]),t("button",{onClick:Z,class:"w-full bg-yellow-600 text-white px-4 py-2 rounded"},"Withdraw")])])):w("",!0),U.value?(l(),n("div",je,[t("div",Le,[t("button",{onClick:e[20]||(e[20]=a=>U.value=!1),class:"absolute top-2 right-2 text-gray-400 hover:text-gray-600"},"âœ•"),e[39]||(e[39]=t("h3",{class:"text-lg font-bold mb-4"},"Send Money",-1)),d(t("input",{"onUpdate:modelValue":e[21]||(e[21]=a=>v.value.amount=a),type:"number",placeholder:"Enter amount",class:"w-full px-3 py-2 border rounded mb-3 bg-white dark:bg-gray-700 dark:text-gray-100"},null,512),[[b,v.value.amount]]),d(t("input",{"onUpdate:modelValue":e[22]||(e[22]=a=>v.value.recipient_uuid=a),type:"text",placeholder:"Recipient Wallet UUID",class:"w-full px-3 py-2 border rounded mb-3 bg-white dark:bg-gray-700 dark:text-gray-100"},null,512),[[b,v.value.recipient_uuid]]),t("button",{onClick:q,class:"w-full bg-blue-600 text-white px-4 py-2 rounded"},"Send")])])):w("",!0)])}}});export{Re as default};
